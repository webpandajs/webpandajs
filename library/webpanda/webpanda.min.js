/**
 * webpanda.js is JavaScript framework for building project on the web.
 * Copyright (c) 1992-2023, webpandajs.com. (MIT Licensed)
 * email <a@apilipala.com> 
 * qq <1102119280>
 * https://webpandajs.com/
 * https://github.com/webpandajs/webpandajs
 */
!function(c,h,H,t){"use strict";function g(e){return null!==e&&"object"==typeof e&&e.constructor==Array}function s(e){return null!==e&&"object"==typeof e&&e.constructor==Object}function F(e){return!("number"!=typeof e&&"string"!=typeof e||isNaN(e)||null===e)&&/^[0-9]+$|^[0-9]+\.[0-9]+$/.test(e)}function n(e){return Boolean("string"==typeof e)}function u(e){e=String(e);return""===e||/^[\s\uFEFF\xA0]+$/.test(e)}function m(e){return"string"==typeof e?e:"number"==typeof e?String(e):""}function r(e){if(null!==e&&"object"==typeof e&&e.constructor===Array)for(var t=new Array,n=0;n<e.length;n++)null!==e[n]&&"object"==typeof e[n]&&e[n]!==e?t.push(r(e[n])):t.push(e[n]);else if(null!==e&&"object"==typeof e&&e.constructor===Object){t=new Object;for(n in e)e.hasOwnProperty(n)&&(null!==e[n]&&"object"==typeof e[n]&&e[n]!==e?t[n]=r(e[n]):t[n]=e[n])}else t=e;return t}function _(e){var t;return 0==arguments.length?null:"string"!=typeof e?e:((t=h.createElement("DIV")).innerText?t.innerText=e:t.textContent=e,e=t.innerHTML,t=null,e.replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"))}function U(e){var t;return 0==arguments.length?null:"string"!=typeof e?e:((t=h.createElement("DIV")).innerHTML=e,e=t.innerText||t.textContent,t=null,e)}function o(e){if(0==arguments.length)return undefined;if(e)if("object"==typeof e){if(e.constructor==Array){for(var t=new Array,n=0;n<e.length;n++)t[n]=o(e[n]);return t}if(e.constructor==Object){var r=new Object;for(n in e)r[o(n)]=o(e[n]);return r}}else if("string"==typeof e)return encodeURIComponent(e);return e}function d(e){if(0==arguments.length)return undefined;if(e)if("object"==typeof e){if(e.constructor==Array){for(var t=new Array,n=0;n<e.length;n++)t[n]=d(e[n]);return t}if(e.constructor==Object){var r=new Object;for(n in e)r[d(n)]=d(e[n]);return r}}else if("string"==typeof e)return decodeURIComponent(e);return e}function z(t){var n=undefined;if("object"==typeof t&&t instanceof HTMLElement)n=t;else if("string"==typeof t||"number"==typeof t)try{var r=h.querySelector(t);r&&(n=r)}catch(e){}return n}function q(e){var t=new Array;if(!e||!e.length)return undefined;for(var n=0;n<e.length;n++){var r,i=e[n];i.deleted||(i.isVoid()?((r=q(i.children))&&r.length&&(t=t.concat(r)),i.renderCompiler&&i.renderCompiler.virtualNodeList&&(r=q(i.renderCompiler.virtualNodeList))&&r.length&&(t=t.concat(r))):t.push(i))}return t}function D(e,t,n){"function"==typeof e.addEventListener?(e.addEventListener(t,n,!1),e.removeEventListener(t,n,!0)):"function"==typeof e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function Q(e,t,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,!1):"function"==typeof e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function W(e,t){var n;return"undefined"==typeof e.stack||u(t)?n=e.replace(new RegExp(t.replace("$","\\$"),"g"),"[[compiler]]"):(t=new RegExp(t.replace("$","\\$"),"g"),n=e.message.replace(t,"[[compiler]]"),n+="\n===============================================\n"+e.stack.replace(t,"[[compiler]]")),n}function G(){this.list=new Array,this.executing=!1,this.intervalId=null}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),G.prototype={constructor:G,run:function(e){this.list.push(e),this.interval()},interval:function(){var n;null===this.intervalId&&((n=this).intervalId=setInterval(function(){if(!n.executing){if(n.executing=!0,n.list.length)for(;n.list.length;){var t=n.list.shift();try{t()}catch(e){console.error(e)}}else clearInterval(n.intervalId),n.intervalId=null;n.executing=!1}},0))}};var i={maxSafeInteger:Number.MAX_SAFE_INTEGER,create:function(e){var t,n=-1;return"undefined"!=typeof i.autoIncrement[e]&&(t=i.autoIncrement[e],n=i.formatExponential(e,t),t>=i.maxSafeInteger?(i.autoIncrement[e]=0,i.increaseExponential(e)):i.autoIncrement[e]++),n},type:{compiler:"compiler",abstractNodeTree:"abstractNodeTree",timer:"timer",include:"include",project:"project",relation:"relation"},autoIncrement:{compiler:0,abstractNodeTree:0,timer:0,include:0,project:0,relation:0},exponential:new Object,increaseExponential:function(e){var t;"undefined"==typeof i.exponential[e]?i.exponential[e]=[0]:(e=i.exponential[e])[t=e.length-1]>=i.maxSafeInteger?e.push(0):e[t]++},formatExponential:function(e,t){return"undefined"==typeof i.exponential[e]?t:i.exponential[e].join(".")+"."+String(t)}};function l(e,t,n,r){this.index=i.create(i.type.timer),this.global=Boolean(t),this.callback="function"==typeof e?e:function(){},this.origin=Date.now(),n=parseInt(n),r=parseInt(r),isNaN(n)&&(n=0),isNaN(r)&&(r=-1),this.target=n,this.limit=r,this.executed=0,this.executing=!1,this.runtime=C.runtime}l.prototype={constructor:l,interval:function(e){return e=parseInt(e),isNaN(e)&&(e=0),this.target=e,this.limit=-1,this},timeout:function(e){return e=parseInt(e),isNaN(e)&&(e=0),this.target=e,this.limit=1,this},start:function(e){return a.start(this,e),this},stop:function(){return a.stop(this),this},status:function(){return a.status(this)}};var a={timers:new Object,queue:new G,intervalId:null,interval:function(){null===a.intervalId&&(a.intervalId=setInterval(function(){if(Object.keys(a.timers).length){var e=new Array;for(r in a.timers){var t,n=a.timers[r];n.executing||(t=Date.now())-n.origin>=n.target&&(n.origin=t,n.executing=!0,function(e){a.queue.run(function(){"function"==typeof e.callback&&e.callback.call(e),e.executing=!1})}(n),n.executed++,0<n.limit)&&n.limit>=n.executed&&e.push(n)}for(var r=0;r<e.length;r++)e[r].stop()}else clearInterval(a.intervalId),a.intervalId=null},0))},start:function(e,t){if(a.status(e))return!0;e.origin=Date.now(),e.executing=!1,t&&(e.executed=0),a.timers[e.index]=e,a.interval()},stop:function(e){return a.status(e)&&delete a.timers[e.index],!0},status:function(e){return"undefined"!=typeof a.timers[e.index]&&a.timers[e.index].runtime==e.runtime},clear:function(){i.autoIncrement.timer=0;var e,t=new Object;for(e in a.timers){var n=a.timers[e];n.global&&(n.index=i.create(i.type.timer),n.runtime=C.runtime,t[n.index]=n)}a.timers=t}};function b(e){e&&"object"==typeof e||(e=new Object),Object.defineProperty(this,"index",{value:i.create(i.type.compiler),writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this,"node",{value:h.createElement("render"),writable:!1,enumerable:!0,configurable:!1});var t="";"undefined"!=typeof e.template&&(t=m(e.template)),this.template=t,this.reference="string"==typeof e.reference||"number"==typeof e.reference?e.reference:undefined,this.observerSwitch=!("undefined"!=typeof e.observerSwitch&&!e.observerSwitch),this.renderSwitch=!("undefined"!=typeof e.renderSwitch&&!e.renderSwitch),this.commandSwitch=!("undefined"!=typeof e.commandSwitch&&!e.commandSwitch),this.parent=undefined,e.parent&&"object"==typeof e.parent&&e.parent instanceof b&&(this.parent=e.parent),this.renderVirtualNode=undefined,this.renderStatus=!1,this.selector=undefined,this.virtualNodeList=new Array}function X(){this.items=new Object}function J(e,t){this.commandList=new Array,t&&("string"==typeof t?this.commandList.push(t):t instanceof Array&&this.append(t)),this.virtualNode=e}function K(e,t,n,r){this.observer=e,this.code=t,this.message=n,this.global=r,this.commandList=new Array,this.force=!1}function Y(e){Object.defineProperty(this,"data",{value:e,writable:!0,enumerable:!1}),Object.defineProperty(this,"length",{value:0,writable:!0,enumerable:!1}),Object.defineProperty(this,"local",{value:new Object,writable:!0,enumerable:!1}),Object.defineProperty(this,"global",{value:new Object,writable:!0,enumerable:!1}),Object.defineProperty(this,"log",{value:new Object,writable:!0,enumerable:!1}),Object.defineProperty(this,"temp",{value:new Array,writable:!0,enumerable:!1})}function Z(){Object.defineProperty(this,"temp",{value:new Array,writable:!0,enumerable:!1})}b.prototype={constructor:b,render:function(e){var t=null;if((e=e&&"object"==typeof e?e:new Object).selector&&null!==e.selector&&(t="object"!=typeof e.selector||e.selector.constructor!=Array&&e.selector.constructor!=f?z(e.selector):e.selector),this.selector&&this.selector instanceof f&&(t&&t===this.selector||(this.selector.renderCompiler.clear(),this.selector.renderCompiler=undefined)),t instanceof f&&((t.renderCompiler=this).renderVirtualNode=t),t=t||this.node,this.selector=t,this.virtualNodeList){this.renderStatus=!0;var n=new ue({compiler:this,data:e.data,onprecompilestatement:e.onprecompilestatement,onobserver:e.onobserver,onbefore:e.onbefore,onafter:e.onafter}),r=new ce({group:this.virtualNodeList}),e=v.get(n.data);e?n.clearTempObserver(e):v.disable(n.data);for(var i=0;i<this.virtualNodeList.length;i++)r.index=i,new x(t,this.virtualNodeList[i],n,r)}return t},parse:function(e){this.unparse();e=new oe(this,this.template,0,e);return this.virtualNodeList=e.result,this},unparse:function(){if(this.renderStatus=!1,this.virtualNodeList&&this.virtualNodeList.length){for(var e=0;e<this.virtualNodeList.length;e++)this.virtualNodeList[e].remove();this.virtualNodeList=new Array}return this},clear:function(){if(this.renderStatus=!1,this.virtualNodeList)for(var e=0;e<this.virtualNodeList.length;e++)this.virtualNodeList[e].clear();return this},html:function(){var e="";if(this.renderStatus&&this.virtualNodeList&&this.virtualNodeList.length){var t,n=q(this.virtualNodeList);for(t in n)n[t].node&&n[t].node.parentNode&&(n[t].isComment()?e+="\x3c!--"+n[t].node.nodeValue+"--\x3e":n[t].isText()?e+=n[t].node.nodeValue:e+=n[t].node.outerHTML)}return e},text:function(){var e="";if(this.renderStatus&&this.virtualNodeList&&this.virtualNodeList.length){var t,n=q(this.virtualNodeList);for(t in n)n[t].node&&n[t].node.parentNode&&(n[t].isComment()||(n[t].isText()?e+=n[t].node.nodeValue:"undefined"!=typeof n[t].node.innerText?e+=n[t].node.innerText:"undefined"!=typeof n[t].node.textContent&&(e+=n[t].node.textContent)))}return e}},X.prototype={constructor:X,set:function(e,t){var n=!1,e=e.index;return"undefined"==typeof this.items[e]?(this.items[e]=new Array,n=!0):this.items[e].indexOf(t)<0&&(n=!0),n&&this.items[e].push(t),n},remove:function(e,t){e=e.index;if("undefined"!=typeof this.items[e]){for(var n=this.items[e],r=new Array,i=0;i<n.length;i++)n.indexOf(t)<0&&r.push(t);r.length<1?delete this.items[e]:this.items[e]=r}},exist:function(e,t){e=e.index;return"undefined"!=typeof this.items[e]&&Boolean(-1<this.items[e].indexOf(t))}},J.prototype={constructor:J,cancel:function(e){for(var t=new Array,n=0;n<this.commandList.length;n++){var r=this.commandList[n];e.indexOf(r)<0&&t.push(r)}this.commandList=t},append:function(e){if("string"==typeof e)this.commandList.indexOf(e)<0&&this.commandList.push(e);else if(e instanceof Array)for(var t=0;t<e.length;t++)"string"==typeof e[t]&&this.commandList.indexOf(e[t])<0&&this.commandList.push(e[t])}},K.prototype={constructor:K,clone:function(e){var t=new K(this.observer,this.code,this.message,this.global);if(e&&e instanceof Array)for(var n=0;n<e.length;n++)t.commandList.push(e[n]);return t},trigger:function(e,t,n){"function"!=typeof e.renderListener||(this.force=Boolean(n),this.commandList=v.publishCommandList(this.observer,e,t,this.force),this.commandList.length<1)||(this.global||this.observer.unsubscribe(this.code,e.index,this.commandList),v.publishSiblingLog(this.observer,this.code,e,this.commandList),e.renderListener(this))}},Y.prototype={constructor:Y,publish:function(e,t){v.publish(this,this.local,e,t),v.publish(this,this.global,e,t)},subscribe:function(e){for(var t in v.subscribe(this.local,e,S.local.abstractNodeTree,S.local.command),S.global){t=S.global[t];v.subscribe(this.global,e,t.abstractNodeTree,t.command)}},unsubscribe:function(e,t,n){"undefined"!=typeof this.local[e]&&"undefined"!=typeof this.local[e][t]&&this.local[e][t].cancel(n)},publishLog:function(e,t,n){for(var r=!1,i=("undefined"==typeof this.log[e]&&(this.log[e]=new Array,r=!0),Boolean("function"==typeof n)),o=0;o<t.length;o++){var a=!1;(r||this.log[e].indexOf(t[o])<0)&&(this.log[e].push(t[o]),a=!0),i&&n(t[o],a)}},clearLog:function(){this.log=new Object}},Z.prototype={constructor:Z,observer:"disabled"};var v={name:"[[webpanda.js "+t+" observer]]",queue:new G,get:function(e){return e&&"object"==typeof e&&e.hasOwnProperty(v.name)?e[v.name]:undefined},create:function(n){if(!n||"object"!=typeof n||n.hasOwnProperty(v.name))return!1;Object.defineProperty(n,v.name,{value:new Y(n),configurable:!0,writable:!0,enumerable:!1}),v.each(n,function(e,t){v.defineProperty(n,e,t)}),n[v.name].length=v.getLength(n)},remove:function(n){return!(!n||"object"!=typeof n||null===n||(v.each(n,function(e,t){v.removeProperty(n,e,t)}),n.hasOwnProperty(v.name)&&n[v.name]instanceof Y&&delete n[v.name],0))},disable:function(e){if(e&&null!==e){if("function"==typeof e)return v.disableContext(e);"object"!=typeof e||(v.has(e)&&v.remove(e),v.hasDisable(e))||Object.defineProperty(e,v.name,{value:new Z,configurable:!0,writable:!0,enumerable:!1})}return e},enable:function(e){if(e&&null!==e){if("function"==typeof e)return v.enableContext(e);v.removeDisable(e),v.create(e)}return e},context:function(e,t){var n=undefined;try{var r=e()}catch(i){n={error:i}}if(t(),n)throw n.error;return r},subscribeStatus:!0,publishStatus:!0,enableContext:function(e){var t=v.subscribeStatus,n=v.publishStatus;return v.subscribeStatus=!0,v.publishStatus=!0,v.context(e,function(){v.subscribeStatus=t,v.publishStatus=n})},enableSubscribeContext:function(e){var t=v.subscribeStatus;return v.subscribeStatus=!0,v.context(e,function(){v.subscribeStatus=t})},enablePublishContext:function(e){var t=v.publishStatus;return v.publishStatus=!0,v.context(e,function(){v.publishStatus=t})},disableContext:function(e){var t=v.subscribeStatus,n=v.publishStatus;return v.subscribeStatus=!1,v.publishStatus=!1,v.context(e,function(){v.subscribeStatus=t,v.publishStatus=n})},disableSubscribeContext:function(e){var t=v.subscribeStatus;return v.subscribeStatus=!1,v.context(e,function(){v.subscribeStatus=t})},disablePublishContext:function(e){var t=v.publishStatus;return v.publishStatus=!1,v.context(e,function(){v.publishStatus=t})},removeDisable:function(e){if(!e||"object"!=typeof e||null===e)return!1;e.hasOwnProperty(v.name)&&e[v.name]instanceof Z&&delete e[v.name]},hasDisable:function(e){return!!(e&&"object"==typeof e&&e.hasOwnProperty(v.name)&&e[v.name]instanceof Z)},has:function(e){return!!(e&&"object"==typeof e&&e.hasOwnProperty(v.name)&&e[v.name]instanceof Y)},each:function(e,t){if(!e||"object"!=typeof e||null===e)return!1;if(e instanceof Array)for(var n=0;n<e.length;n++)e[n]!==e&&("undefined"==typeof e[n]&&(e[n]=undefined),t(n,e[n]));else for(var n in e)e[n]!==e&&e.hasOwnProperty(n)&&n!==v.name&&t(n,e[n])},subscribeIgnore:new X,subscribe:function(e,t,n,r){var i;return!(!n||!r||!n.isObserver()||v.subscribeIgnore.exist(n,r))&&(i=n.index,void("undefined"==typeof e[t]?(e[t]=new Object,e[t][i]=new J(n,r)):"undefined"==typeof e[t][i]?e[t][i]=new J(n,r):e[t][i].append(r)))},publish:function(e,t,n,r){var i=new Array,o=t[n];if(o){for(var a in o){var s=o[a],c=s.virtualNode,s=s.commandList;!c||null===c||c.deleted?i.push(a):c.isObserver()?new K(e,n,r,e.global===t).trigger(c,s):i.push(a)}for(;i.length;){var u=i.pop();delete t[n][u]}}},publishCommandList:function(e,t,n,r){var i=new Array;return e.publishLog(t.index,n,function(e,t){(t||r)&&i.push(e)}),i},publishSiblingLog:function(e,t,n,r){t=e.data[t];v.has(t)&&(e=v.get(t))&&e.publishLog(n.index,r)},getLength:function(e){return(e instanceof Array?e:Object.getOwnPropertyNames(e)).length},lengthCheck:function(e,t,n){t=v.getLength(t);e.length!=t&&(e.length=t,n())},lengthUpdate:function(n){v.each(n,function(e,t){Object.getOwnPropertyDescriptor(n,e)&&Object.getOwnPropertyDescriptor(n,e).get&&Object.getOwnPropertyDescriptor(n,e).set||v.defineProperty(n,e,t)})},defineProperty:function(t,n,r){if(!(r instanceof Ce)){if(v.create(r),Object.getOwnPropertyDescriptor(t,n)&&Object.getOwnPropertyDescriptor(t,n).get&&Object.getOwnPropertyDescriptor(t,n).set)return!0;Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){return v.subscribeStatus&&v.has(t)&&t[v.name].subscribe(n),v.publishStatus&&v.has(r)&&v.queue.run(function(){if(!v.has(r))return!1;v.lengthCheck(r[v.name],r,function(){t[v.name].clearLog(),v.lengthUpdate(r),v.has(t)&&t[v.name].publish(n,"length change")})}),r},set:function(e){r!==e&&(r=e,v.defineProperty(t,n,r),v.publishStatus)&&(t[v.name].clearLog(),v.queue.run(function(){v.has(t)&&t[v.name].publish(n,"set change")}))}})}},removeProperty:function(e,t,n){v.remove(n),Object.getOwnPropertyDescriptor(e,t)&&(Object.getOwnPropertyDescriptor(e,t).get||Object.getOwnPropertyDescriptor(e,t).set)&&Object.defineProperty(e,t,{enumerable:!0,configurable:!0,value:n})}},ee="element",te="singleElement",ne="comment",re="text",ie="commandText";function f(e,t){Object.defineProperty(this,"index",{value:i.create(i.type.abstractNodeTree),writable:!1,configurable:!1}),this.selector=undefined,this.node=null,this.tag="",this.tagError=!1,this.type="",this.parent=t&&t instanceof f?t:undefined,this.children=[],this.compiler=e,this.templateIndex=-1,this.templateError=!1,this.templateWarning=!1,this.frontBeforeIndex=-1,this.frontAfterIndex=-1,this.backBeforeIndex=-1,this.backAfterIndex=-1,this.front="",this.back="",this.inner="",this.length=0,this.command={},this.commandTemplate={},this.commandError=!1,this.commandWarning=!1,this.commandBuffer={},this.attribute={},this.attributeTemplate={},this.eventBuffer={},this.eventListener={},this.renderListener=null,this.renderPermit=!0,this.renderSubscriber=new de(this),this.renderStatus=!1,this.renderCompiler=undefined,this.virtual=!1,this.deleted=!1}function oe(e,t,n,r){for(this.templateIndex=n||0,this.result=new Array,this.current=null,this.template="number"==typeof t?String(t):t;;){if("string"!=typeof this.template||u(this.template))break;if(this.current=new f(e,r),this.match(0),this.current.templateIndex=this.templateIndex,this.append(),!this.settle())break}}function ae(e,t,n,r){if(this.abstractNodeTree=e,!this.abstractNodeTree.isError()){if(this.abstractNodeTree.isCommand()){if(this.key=t.toLowerCase().replace(/^\-/,"webpanda-").replace(/^webpanda\-\-/,"webpanda-attribute-"),this.value=n,this.command=m(r).trim(),this.pushAttributeTemplate(),this.$this="",this.$event="undefined",this.$expression="","webpanda-if"==this.key||"webpanda-else-if"==this.key||"webpanda-else"==this.key)return this.$conditional();if("${}"==this.key)return this.$print(!1,!1);if("webpanda-html"==this.key)return this.$print(!1,!0);if("{{}}"==this.key)return this.$print(!0,!1);if("webpanda-text"==this.key)return this.$print(!0,!0);if("webpanda-for"==this.key)return this.$for();if("webpanda-for-id"==this.key)return this.$forId();if("webpanda-is"==this.key)return this.$is();if("webpanda-attribute"==this.key||0==this.key.indexOf("webpanda-attribute-"))return this.$attribute();if("webpanda-class"==this.key||0==this.key.indexOf("webpanda-class-"))return this.$class();if("webpanda-style"==this.key||0==this.key.indexOf("webpanda-style-"))return this.$style();if(0==this.key.indexOf("webpanda-on"))return this.$on();if("webpanda-template"==this.key)return this.$template();if("webpanda-webpanda"==this.key)return this.$webpanda();if("webpanda-element"==this.key)return this.$element();if("webpanda-before"==this.key)return this.$before();if("webpanda-after"==this.key)return this.$after();if(0==this.key.indexOf("webpanda-"))return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000004,t))}this.abstractNodeTree.attribute[t]=n}}function p(){this.timestamp=(new Date).valueOf(),this.identifier=""}function y(e){this.data=e,this.replace=new Array,this.numbers=0;e=(new Date).valueOf();if(this.prefix=y.prototype.PREFIX_OF_RULE+"String_"+e+"_",this.data&&"string"==typeof this.data&&""!==this.data){var t=y.prototype.PREFIX_OF_RULE+"SingleQuotes_"+e+y.prototype.SUFFIX_OF_RULE,t=(this.data=this.data.replace(/\\'/g,t),this.replace.push({rule:t,restore:"\\'"}),y.prototype.PREFIX_OF_RULE+"DoubleQuotes_"+e+y.prototype.SUFFIX_OF_RULE);for(this.data=this.data.replace(/\\"/g,t),this.replace.push({rule:t,restore:'"'});;){var n=/\'([^\']{0,})\'/g.exec(this.data);if(!(n=n||/\"([^\"]{0,})\"/g.exec(this.data)))break;var r=this.append(n[0]),i=this.data.slice(0,n.index),n=this.data.slice(n.index+n[0].length);this.data=i+r+n}}}function se(e,t,n){for(this.command=t,this.commandShield=n,this.splits=new Array;;){var r=this.rule.exec(e);if(!r)break;if(r.index&&this.splits.push(e.slice(0,r.index)),this.splits.push(r[0]),!(e=e.slice(r.index+r[0].length)))break}""!=e&&this.splits.push(e),this.objectScene=new Array,this.templateScene={status:!1,printBefore:"",printAfter:"",printVariable:"",pattern:new Array},this.index=-1,this.concats=new Array,this.parse()}function x(t,n,r,i,e){if(n&&n.deleted)n.remove();else if(t&&n)if(!("object"==typeof t&&t instanceof f)||t.isRender()&&t.renderPermit){if(this.setVirtualNodeRenderPermit(n,i.publisher),n.isRender()&&n.renderPermit){var o=new ce(i);if(n.renderListener=function(e){o.publisher=e,r.restore(i,function(){new x(t,n,r,o,function(){"function"==typeof r.onobserver&&r.onobserver.call(n,e)})}),n.renderSubscriber.publish(e)},this.abstractNodeTree=n,this.renderSetting=i,this.renderEnvironment=r,this.parent=t,this.abstractNodeTree.templateError=!1,this.abstractNodeTree.selector=t,r.abstractNodeTree=this.abstractNodeTree,"function"==typeof this.renderEnvironment.onbefore&&this.renderEnvironment.context(this.abstractNodeTree,undefined,function(){r.onbefore.call(n)},{disable:!0}),this.abstractNodeTree.command.before){if(this.abstractNodeTree.isError())return e?e():null;this.$handler(this.abstractNodeTree.command.before)}if(this.abstractNodeTree.command["if"]||this.abstractNodeTree.command["else-if"]||this.abstractNodeTree.command["else"]){if(this.abstractNodeTree.isError())return e?e():null;if(!this.$conditional())return e?e():null}if(this.abstractNodeTree.command.template){if(this.abstractNodeTree.isError())return e?e():null;this.$template()}var a=!1;if(this.abstractNodeTree.command["for"]){if(this.abstractNodeTree.isError())return e?e():null;this.$for(),a=!0}if(!a){if(this.abstractNodeTree.command.is){if(n.isError())return e?e():null;if(!this.$is())return e?e():null}var a=this.abstractNodeTree.isVoid(),s=!1;if(this.abstractNodeTree.node||a)this.abstractNodeTree.node&&!a&&this.isInitialize()&&(s=!0);else{if(this.abstractNodeTree.isError())return e?e():null;this.abstractNodeTree.createNode(),s=Boolean(this.abstractNodeTree.node)}if(s&&this.abstractNodeTree.command.element){if(this.abstractNodeTree.isError())return e?e():null;this.$handler(this.abstractNodeTree.command.element,!0)}if(this.abstractNodeTree.command.print){if(this.abstractNodeTree.isError())return e?e():null;this.$print()}if(a){if(this.abstractNodeTree.isError())return e?e():null;this.$webpanda()}else if(this.abstractNodeTree.node){if(this.append(),this.abstractNodeTree.isTextareaElement()){if(this.abstractNodeTree.isError())return e?e():null;this.$textareaElement()}else if(this.abstractNodeTree.isSvgElement()){if(this.abstractNodeTree.isError())return e?e():null;this.$svgElement()}else{if(this.abstractNodeTree.isError())return e?e():null;this.$children()}if(this.abstractNodeTree.command.attribute){if(this.abstractNodeTree.isError())return e?e():null;this.$attribute()}if(this.abstractNodeTree.command["class"]){if(this.abstractNodeTree.isError())return e?e():null;this.$class()}if(this.abstractNodeTree.command.style){if(this.abstractNodeTree.isError())return e?e():null;this.$style()}if(this.abstractNodeTree.command.event){if(this.abstractNodeTree.isError())return e?e():null;this.$on()}}}if(this.abstractNodeTree.command.after){if(this.abstractNodeTree.isError())return e?e():null;this.$handler(this.abstractNodeTree.command.after)}return"function"==typeof this.renderEnvironment.onafter&&this.renderEnvironment.context(this.abstractNodeTree,undefined,function(){r.onafter.call(n)},{disable:!0}),this.abstractNodeTree.renderStatus=!0,e?e():null}}else n.renderStatus=!1}function ce(e){this.group="undefined"!=typeof e.group?e.group:undefined,this.index="undefined"!=typeof e.index?e.index:-1,this.each="undefined"!=typeof e.each?e.each:undefined,this.context="undefined"!=typeof e.context?e.context:S.clone(),this.publisher=null}function ue(e){this.compiler=e.compiler,this.abstractNodeTree=null,this.data=e.data&&"object"==typeof e.data?e.data:new Object,this.onobserver="function"==typeof e.onobserver?e.onobserver:null,this.onprecompilestatement="function"==typeof e.onprecompilestatement?e.onprecompilestatement:null,this.onbefore="function"==typeof e.onbefore?e.onbefore:null,this.onafter="function"==typeof e.onafter?e.onafter:null,this.localContext=new Object,this.globalContext=new Object}function he(e,t,n){this.renderEnvironment=e,this.virtualNode=t,this.event=n||c.event}function de(e){this.virtualNode=e,this.local=new Object,this.global=new Object}f.prototype={constructor:f,getTemplate:function(){var e,t=0<this.frontBeforeIndex?this.templateIndex+this.frontBeforeIndex:this.templateIndex;return e=this.isText()||this.frontAfterIndex<0?this.templateIndex+this.length:this.templateError||this.backAfterIndex<0?this.templateIndex+this.frontAfterIndex:this.templateIndex+this.backAfterIndex,this.compiler.template.slice(t,e)},getReference:function(){for(var e=undefined,t=[this.compiler];t.length;){var n=t.pop();if(void 0!==(e=n.reference)&&!u(e))break;if(!n.parent)break;t.push(n.parent)}return e},isElement:function(){return Boolean(this.type===ee||this.type===te)},isSingleElement:function(){return Boolean(this.type===te)},isComment:function(){return Boolean(this.type===ne)},isText:function(){return Boolean(this.type===re||this.type===ie)},isVoid:function(){return!!(this.virtual||"webpanda"==this.tag.toLowerCase()||this.type==ie||this.command&&(this.command["for"]||this.command.webpanda))},isConditional:function(){return"undefined"!=typeof this.command["if"]||"undefined"!=typeof this.command["else-if"]||"undefined"!=typeof this.command["else"]||"undefined"!=typeof this.command.is},isAggregate:function(){return"undefined"!=typeof this.command.print||"undefined"!=typeof this.command.template},isScriptElement:function(){return"script"==this.tag.toLowerCase()&&this.type===ee},isStylesheetElement:function(){return"style"==this.tag.toLowerCase()&&this.type===ee},isTextareaElement:function(){return"textarea"==this.tag.toLowerCase()&&this.type===ee},isSvgElement:function(){return"svg"==this.tag.toLowerCase()&&this.type===ee},isCommand:function(){return Boolean(this.compiler.commandSwitch)},isRender:function(){return!(this.deleted||this.commandError||(!this.compiler.renderSwitch||this.compiler.parent&&!this.compiler.parent.renderSwitch||this.compiler.renderVirtualNode&&!this.compiler.renderVirtualNode.compiler.renderSwitch)&&!(this.renderStatus=!1))},isObserver:function(){return!this.deleted&&!(!this.compiler.observerSwitch||this.compiler.parent&&!this.compiler.parent.observerSwitch)},isError:function(){return!(!this.templateError&&!this.commandError||(this.clear(),0))},clear:function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node);var t=new Array;if(this.isVoid()&&this.children&&this.children.length&&(t=t.concat(this.children)),(t=this.renderCompiler&&this.renderCompiler.virtualNodeList&&this.renderCompiler.virtualNodeList.length?t.concat(this.renderCompiler.virtualNodeList):t).length){var n=q(t);if(n&&n.length)for(var r=0;r<n.length;r++)try{n[r].node&&n[r].node.parentNode&&n[r].node.parentNode.removeChild(n[r].node)}catch(e){this.warning("[[clear]]",e)}}},remove:function(){for(var e=[this],t=null;e.length;)if((t=e.pop()).node&&t.node.parentNode&&t.node.parentNode.removeChild(t.node),t.deleted=!0,t.children&&t.children.length&&(e=e.concat(t.children)),t.renderCompiler&&t.renderCompiler.virtualNodeList){var n,r=t.renderCompiler.virtualNodeList;for(n in r)r[n].clear()}},removeChildren:function(e){"string"==typeof e&&(e=parseInt(e));for(var t=0,n=e=!isNaN(e)&&"number"==typeof e?e:0;n<this.children.length;n++)this.children[n].remove(),t++;0<t&&this.children.splice(e,t)},removeChildrenIndexOf:function(e){e.remove();e=this.children.indexOf(e);-1<e&&this.children.splice(e,1)},createNode:function(){if(this.isVoid())return!1;if(this.isComment())this.node=h.createComment(this.inner);else if(this.isText())t=c.ActiveXObject||"ActiveXObject"in c?this.inner.replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"):this.inner,this.node=h.createTextNode(U(t));else{if(!this.isElement())return!1;var t,n;for(n in this.isSvgElement()?(t="string"==typeof this.attribute.xmlns?this.attribute.xmlns:"http://www.w3.org/2000/svg",this.node=h.createElementNS(t,"svg")):this.node=h.createElement(this.tag),this.attribute)try{this.node.setAttribute(n,this.attribute[n])}catch(e){this.templateWarning=!0,this.warning(n,e)}}return!0},error:function(e,t){var t="Webpanda CompilerError:\n\n┍---------------------------------------------┑\n\n"+("undefined"==typeof(t=void 0===t?"":t).stack?t:t+"\n===============================================\n"+t.stack)+"\n\n┝---------------------------------------------┥",n=this.getReference();void 0===n||u(n)||(t+="\n\n["+M(10000004)+"]\n\n"+n),t+="\n\n["+M(10000001)+"]\n\n"+e+"\n\n["+M(10000002)+"]\n\n"+this.getTemplate()+"\n\n┕---------------------------------------------┙\n",console.error(t)},warning:function(e,t){var t="Webpanda CompilerWarning:\n\n┍---------------------------------------------┑\n\n"+("undefined"==typeof(t=void 0===t?"":t).stack?t:t+"\n===============================================\n"+t.stack)+"\n\n┝---------------------------------------------┥",n=this.getReference();void 0===n||u(n)||(t+="\n\n["+M(10000004)+"]\n\n"+n),t+="\n\n["+M(10000003)+"]\n\n"+e+"\n\n["+M(10000002)+"]\n\n"+this.getTemplate()+"\n\n┕---------------------------------------------┙\n",console.warn(t)}},oe.prototype={constructor:oe,filtrate:function(e){e=e.replace(/\r\n|\r|\n/g,"");for(var t,n="",r=null;;)if(null===r){if((r=e.indexOf("\x3c!--"))<0)break}else{if((t=e.indexOf("--\x3e"))<0)break;n+=e.slice(0,r),e=e.slice(t+"--\x3e".length),r=null}return n+e},replace:function(e,t){for(var n=(new Date).valueOf(),r=0;r<t.length;r++)e=e.replace(t[r],"__Webpandajs_Cleanup_"+r+"_"+n+"__");return e},match:function(e){if(this.current.frontBeforeIndex=this.template.indexOf("<",e||0),this.current.frontBeforeIndex<0)this.current.tagError=!0;else{e=String("\x3c!--").length,e=this.current.frontBeforeIndex+e;if("\x3c!--"==this.template.slice(this.current.frontBeforeIndex,e))return this.current.frontAfterIndex=e,this.current.backBeforeIndex=this.template.indexOf("--\x3e",this.current.frontBeforeIndex),this.current.backBeforeIndex<0?void(this.current.tagError=!0):(this.current.backAfterIndex=this.current.backBeforeIndex+String("--\x3e").length,this.current.type=ne,this.current.inner=this.template.slice(this.current.frontAfterIndex,this.current.backBeforeIndex),void(this.current.length=this.current.backAfterIndex-this.current.frontBeforeIndex));for(var t=this.current.frontBeforeIndex;;){if((o=this.template.indexOf(">",t))<0)break;var n=this.template.slice(this.current.frontBeforeIndex,o),r=(n=this.filtrate(n),(n=this.replace(n,[/\\'/g,/\\"/g,/\'([^\']{0,})\'/g,/\"([^\"]{0,})\"/g])).match(/\'/g)),i=n.match(/\"/g);if(!r&&!i){this.current.frontAfterIndex=o+String(">").length;break}t=o+String(">").length}if(this.current.frontAfterIndex<0)this.current.tagError=!0;else{this.current.front=this.template.slice(this.current.frontBeforeIndex,this.current.frontAfterIndex);e=/^\<\s{0,}([^\<\>\s\/]+)/.exec(this.current.front);if(e&&(this.current.tag=e[1]),""!=this.current.tag&&/^[\w\d\-\_]+$/.test(this.current.tag))if(this.current.front.match(/\/\s{0,}\>$/))this.current.length=this.current.frontAfterIndex-this.current.frontBeforeIndex,this.current.type=te;else{for(var o,a="</"+this.current.tag,e=this.current.tag.replace("-","\\-"),s=new RegExp("(\\<"+e+"\\s{1,}|\\<"+e+"\\s{0,}\\>)","g"),c=new RegExp("\\<\\/"+e+"\\s{0,}\\>","g"),u=new RegExp("\\<"+e+"\\s{0,}([^\\<\\>]+)?\\/\\s{0,}\\>","g"),h=this.current.frontAfterIndex,d=String(">").length;;){if((o=this.template.indexOf(a,h))<0)break;var h=o+a.length,l=this.template.indexOf(">",o);if(!(l<0)){var f=(f=this.template.slice(o,l+d)).replace(/\s+/g,"");if(a+String(">")===f){n=this.template.slice(this.current.frontAfterIndex,o);if(n=this.filtrate(n),n=this.replace(n,[/\\'/g,/\\"/g,/\'([^\']{0,})\'/g,/\"([^\"]{0,})\"/g,u]),!/\<\!\-\-/.test(n)){var f=n.match(s),p=n.match(c);if(!p&&!f||p&&f&&p.length==f.length){this.current.backBeforeIndex=o,this.current.backAfterIndex=l+String(">").length;break}}}}}this.current.backBeforeIndex<0?(this.current.length=this.current.frontAfterIndex-this.current.frontBeforeIndex,this.current.type=te):(this.current.back=this.template.slice(this.current.backBeforeIndex,this.current.backAfterIndex),this.current.inner=this.template.slice(this.current.frontAfterIndex,this.current.backBeforeIndex),this.current.length=this.current.backAfterIndex-this.current.frontBeforeIndex,this.current.type=ee)}else this.current.tag="",this.current.tagError=!0}}},append:function(){var e,t;this.current.tagError?this.current.frontBeforeIndex<0?u(this.template)||(this.result=this.result.concat(this.createVirtualText(this.current,this.template)),this.current=this.result[this.result.length-1]):0<=this.current.frontBeforeIndex&&this.current.frontAfterIndex<0?u(t=this.template.slice(0,this.current.frontBeforeIndex+String("<").length))||(this.result=this.result.concat(this.createVirtualText(this.current,t))):0<=this.current.frontAfterIndex&&(u(t=this.template.slice(0,this.current.frontAfterIndex))||(this.result=this.result.concat(this.createVirtualText(this.current,t)))):(u(t=this.template.slice(0,this.current.frontBeforeIndex))||((e=new f(this.current.compiler,this.current.parent)).templateIndex=this.templateIndex,this.result=this.result.concat(this.createVirtualText(e,t))),this.current.isComment()?this.result.push(this.current):this.current.isSingleElement()?this.result.push(this.createVirtualElement(this.current)):(this.current=this.createVirtualElement(this.current),"style"===this.current.tag.toLowerCase()?((e=new f(this.current.compiler,this.current)).templateIndex=this.current.frontAfterIndex+this.current.templateIndex,this.current.children=this.createVirtualText(e,this.current.inner,!0)):this.current.command&&(this.current.command["for"]||this.current.command.template||this.current.command.print)||(t=new oe(this.current.compiler,this.current.inner,this.current.frontAfterIndex+this.current.templateIndex,this.current)).result.length&&(this.current.children=this.current.children.concat(t.result)),this.result.push(this.current)))},settle:function(){if((this.current.isSingleElement()||this.current.tagError&&0<=this.current.frontAfterIndex)&&0<=this.current.frontAfterIndex&&this.current.frontAfterIndex<this.template.length)this.template=this.template.slice(this.current.frontAfterIndex),this.templateIndex=this.current.frontAfterIndex+this.current.templateIndex;else if(0<=this.current.backAfterIndex&&this.current.backAfterIndex<this.template.length)this.template=this.template.slice(this.current.backAfterIndex),this.templateIndex=this.current.backAfterIndex+this.current.templateIndex;else{if(!(0<=this.current.frontBeforeIndex&&this.current.frontAfterIndex<0&&this.current.frontBeforeIndex+String("<").length<this.template.length))return!1;this.template=this.template.slice(this.current.frontBeforeIndex+String("<").length),this.templateIndex=this.current.frontBeforeIndex+String("<").length+this.current.templateIndex}return!0},createVirtualElement:function(e){if(e.front)for(var t=new y(e.front),n=t.data.replace(/^(\<\s{0,})/,"").replace(/(\s{0,}\/?\s{0,}\>)$/,""),r=!1;;){var i,o,a,s=/([^\s\=]+\s{0,}\=\s{1}|[^\s\=]+\s{0,}\=\s{0,}[^\s\=]+|[^\s\=]+)/.exec(n);if(!s)break;n=n.slice(s.index+s[0].length),r?("undefined"==typeof(s=(s[1]+" ").split(/\=/))[1]?(o="",i=a=t.reset(s[0]).toString()):(a=(i=t.reset(s[0]).toString())+"="+(o=t.reset(s[1]).toString()),o='"'===(o=m(o).trim()).slice(0,1)?o.replace(/(^\"|\"$)/g,""):o.replace(/(^\'|\'$)/g,"")),new ae(e,m(i).trim(),o,a)):r=!0}return e},createVirtualText:function(e,t,n){var r=new Array;if(!e.isCommand()||n)u(t)||(e.inner=t,e.length=t.length,e.type=re,r.push(e));else{var i,o=/\{\s{0,}\{([^\}\{]{1,})\}\s{0,}\}|\$\{([^\}\{}]{1,})\}/,a=t;for(undefined;!e.isError()&&(i=o.exec(a));){0<i.index&&((s=new f(e.compiler,e.parent)).templateIndex=e.templateIndex,s.inner=a.slice(0,i.index),s.length=t.length,s.type=re,r.push(s));var s=new f(e.compiler,e.parent);if(s.templateIndex=e.templateIndex,s.length=t.length,s.type=ie,"undefined"!=typeof i[1]?(s.inner=i[1],new ae(s,"{{}}",i[1],i[0])):"undefined"!=typeof i[2]&&(s.inner=i[2],new ae(s,"${}",i[2],i[0])),r.push(s),!(a=a.slice(i.index+i[0].length))||a.length<=3)break}e.isError()||(!r.length||""==a)&&u(a)||((n=new f(e.compiler,e.parent)).templateIndex=e.templateIndex,n.inner=a,n.tagLength=t.length,n.type=re,r.push(n))}return r}},ae.prototype={constructor:ae,pushAttributeTemplate:function(){"undefined"==typeof this.abstractNodeTree.attributeTemplate[this.key]&&(this.abstractNodeTree.attributeTemplate[this.key]=new Array),this.abstractNodeTree.attributeTemplate[this.key].push(this.command)},pushCommandTemplate:function(e,t){"undefined"==typeof this.abstractNodeTree.commandTemplate[e]&&(this.abstractNodeTree.commandTemplate[e]=new Array),this.abstractNodeTree.commandTemplate[e].push(t)},pushCommandMultipleAppend:function(e,t){"undefined"==typeof this.abstractNodeTree.command[e]&&(this.abstractNodeTree.command[e]=new Array),this.abstractNodeTree.command[e].push({functional:t,command:this.command}),this.pushCommandTemplate(e,this.command)},analyseExpression:function(){var e=new y(this.$expression);e.data=this.createWithStatement(e.data,e),e.data=this.createPrecompileStatement(e.data),this.$expression=e.toString()},createWithStatement:function(e,t){return e&&new se(e,this,t).toString()},createPrecompileStatement:function(e){return e.replace(/\#\s{0,}([A-Za-z]+)/g,this.$this+".precompileStatement("+this.$this+".abstractNodeTree,'#$1',"+this.$event+")")},createExceptionCommand:function(){return _(this.command.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))},createFunction:function(t,n){try{return new Function("$callback","$event",t)}catch(e){t=W(e,this.$this);return n?(this.abstractNodeTree.templateWarning=!0,this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,t)):(this.abstractNodeTree.templateError=!0,this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,t)),!1}},createPrintFunction:function(e,t){var n=new p;this.$this=n.name("THIS").toString(),t&&""===this.value?this.$expression=this.$this+".abstractNodeTree.inner":(this.$expression=this.value,this.analyseExpression());n=(n=(n="var "+this.$this+"=this;\nreturn (function(){\n\t\t try{\n")+(e?"\t\t\t return "+this.$this+".print("+this.$this+".encodeHTML("+this.$expression+"));\n":"\t\t\t return "+this.$this+".print("+this.$expression+");\n")+"\t\t }catch(e){\n")+"\t\t\t "+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+"\");return ''; \n";return this.createFunction(n=n+"\t\t }\n"+"})();")},createAttrClassStyleSingleFunction:function(e){var t=new p,t=(this.$this=t.name("THIS").toString(),t.name("OBJECT").toString()),e=(this.analyseExpression(),"'"+e+"'"),n="var "+this.$this+"=this;\n",n=(n=(n=(n+="return (function(){\n")+"\t\t try{\n"+("\t\t\t var "+t+"={"+e+":(function(){return "+this.$expression+";}())};\n"))+("\t\t\t return "+t+";\n")+"\t\t }catch(e){\n")+("\t\t\t "+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+'");return {}; \n');return this.createFunction(n=n+"\t\t }\n"+"})();",!0)},createAttrStyleFunction:function(){var e=new p,e=(this.$this=e.name("THIS").toString(),e.name("OBJECT").toString());this.analyseExpression();var t=(t=(t=(t=(t="var "+this.$this+"=this;\nreturn (function(){\n\t\t try{\n")+"\t\t\t var "+e+"="+this.$expression+";\n\t\t\t if(typeof "+e+" == 'object'){\n")+"\t\t\t\t return "+e+";\n\t\t\t }else{\n")+"\t\t\t\t throw "+this.$this+".language(30000004,"+this.$this+".decodeHTML('"+_(this.value)+"'));\n\t\t\t }\n\t\t }catch(e){\n")+"\t\t\t "+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+'");return {}; \n';return this.createFunction(t=t+"\t\t }\n"+"})();",!0)},createValueFunction:function(){var e=new p,e=(this.$this=e.name("THIS").toString(),this.analyseExpression(),"var "+this.$this+"=this;\n");return e+="return (function(){try{return "+this.$expression+";}catch(e){"+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+'");return null;}}());',this.createFunction(e,!0)},createHandleFunction:function(){var e=new p;this.$this=e.name("THIS").toString(),this.analyseExpression();e=(e=(e="var "+this.$this+"=this;\nreturn (function(){\n\t\t try{\n")+"\t\t\t"+this.$expression+";\n\t\t }catch(e){\n")+"\t\t\t "+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+'");return undefined; \n';return this.createFunction(e=e+"\t\t }\n"+"})();",!0)},$conditional:function(){if("undefined"!=typeof this.abstractNodeTree.command["if"]||"undefined"!=typeof this.abstractNodeTree.command["else-if"]||"undefined"!=typeof this.abstractNodeTree.command["else"])return this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000001,"webpanda-if|webpanda-else-if|webpanda-else"));if("webpanda-else"==this.key)return this.abstractNodeTree.command["else"]=!0,this.abstractNodeTree.commandTemplate["else"]=this.command,!0;if(this.$expression=m(this.value).trim(),""==this.$expression){if("webpanda-if"==this.key)return this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000003,"webpanda-if"));if("webpanda-else-if"==this.key)return this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000003,"webpanda-else-if"))}var e=new p,e=(this.$this=e.name("THIS").toString(),this.analyseExpression(),"var "+this.$this+"=this;\n"),e=(e+="return (Boolean(function(){try{return "+this.$expression+";}catch(e){"+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+'");return false;}}()));',this.createFunction(e));if("function"!=typeof e)return!1;"webpanda-if"==this.key?(this.abstractNodeTree.command["if"]=e,this.abstractNodeTree.commandTemplate["if"]=this.command):(this.abstractNodeTree.command["else-if"]=e,this.abstractNodeTree.commandTemplate["else-if"]=this.command)},$print:function(e,t){return"undefined"!=typeof this.abstractNodeTree.command.print?(this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000001,"webpanda-html|webpanda-text"))):"function"==typeof(e=this.createPrintFunction(e,t))&&(this.abstractNodeTree.command.print=e,void(this.abstractNodeTree.commandTemplate.print=this.command))},$for:function(){if("undefined"!=typeof this.abstractNodeTree.command["for"])return this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000002,"webpanda-for"));if(this.$expression=m(this.value).trim(),""==this.$expression)return this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000003,"webpanda-for"));var e=undefined,t=undefined,n=undefined,r=undefined,i=/\(([^\(\)\,]+)\,{0,1}\s{0,}([^\(\)\,]+)?\,{0,1}\s{0,}([^\(\)\,]+)?\)\s{0,}(.*)/.exec(this.$expression);if(i&&(e=m(i[1]).trim(),"undefined"!=typeof i[2]&&(i[2]=m(i[2]).trim(),""!==i[2])&&(t=i[2]),"undefined"!=typeof i[3]&&(i[3]=m(i[3]).trim(),""!==i[3])&&(n=i[3]),r=m(i[4]).trim()),!r||!e)return this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000004,"webpanda-for"));this.$expression=r;var i=new p,r=(this.$this=i.name("THIS").toString(),i.name("CALLBACK").toString()),o=i.name("FOR_OBJECT").toString(),a=i.name("FOR_INDEX").toString(),i=i.name("FOR_NUMBER").toString(),s="'"+e+"'",c=void 0!==t?"'"+t+"'":"undefined",u=void 0!==n?"'"+n+"'":"undefined",h=(this.analyseExpression(),"var "+this.$this+"=this;\n"),r=(h=(h=h+("var "+r+"=$callback;\n")+"return (function(){\n")+"\t\t try{\n"+("\t\t\t if(typeof "+this.$this+".data."+e+"!='undefined') throw "+this.$this+".language(30000002,'"+e+"');\n"),void 0!==t&&(h+="\t\t\t if(typeof "+this.$this+".data."+t+"!='undefined') throw "+this.$this+".language(30000001,'"+t+"');\n"),void 0!==n&&(h+="\t\t\t if(typeof "+this.$this+".data."+n+"!='undefined') throw "+this.$this+".language(30000003,'"+n+"');\n"),h=(h=(h+="\t\t\t var "+o+"="+this.$expression+";\n")+("\t\t\t if(typeof "+o+"!='object') throw "+this.$this+".language(30000004,'"+this.$expression.replace(/\'/g,"\\'").replace(/\"/g,'\\"')+"');\n")+("\t\t\t if("+o+" && "+o+".constructor == Array){\n"))+("\t\t\t\t for(var "+a+"=0; "+a+"<"+o+".length; "+a+"++){\n")+("\t\t\t\t\t "+this.$this+".data."+e+"="+o+"["+a+"]; \n"),void 0!==t&&(h+="\t\t\t\t\t "+this.$this+".data."+t+"="+a+"; \n"),void 0!==n&&(h+="\t\t\t\t\t "+this.$this+".data."+n+"="+a+"; \n"),h=(h=(h=h+("\t\t\t\t\t "+r+"("+this.$this+","+a+","+o+","+a+","+s+","+c+","+u+"); \n")+"\t\t\t\t }\n")+"\t\t\t }else{\n"+("\t\t\t\t var "+i+"=0;\n"))+("\t\t\t\t for(var "+a+" in "+o+"){\n")+("\t\t\t\t\t "+this.$this+".data."+e+"="+o+"["+a+"]; \n"),void 0!==t&&(h+="\t\t\t\t\t "+this.$this+".data."+t+"="+a+"; \n"),void 0!==n&&(h+="\t\t\t\t\t "+this.$this+".data."+n+"="+i+"; \n"),h=(h=(h+="\t\t\t\t\t "+r+"("+this.$this+","+i+","+o+","+a+","+s+","+c+","+u+"); \n")+("\t\t\t\t\t "+i+"++;\n")+"\t\t\t\t }\n")+"\t\t\t }\n"+("\t\t\t if(typeof "+this.$this+".data."+e+" != 'undefined') delete "+this.$this+".data."+e+";\n"),void 0!==t&&(h+="\t\t\t if(typeof "+this.$this+".data."+t+" != 'undefined') delete "+this.$this+".data."+t+";\n"),void 0!==n&&(h+="\t\t\t if(typeof "+this.$this+".data."+n+" != 'undefined') delete "+this.$this+".data."+n+";\n"),h=(h+="\t\t }catch(e){\n")+("\t\t\t "+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+"\");return ''; \n"),this.createFunction(h=h+"\t\t }\n"+"})();"));if("function"!=typeof r)return!1;this.abstractNodeTree.command["for"]=r,this.abstractNodeTree.commandTemplate["for"]=this.command},$forId:function(){var e;return"undefined"!=typeof this.abstractNodeTree.command["for-id"]?(this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000002,"webpanda-for-id"))):(this.$expression=m(this.value).trim(),""==this.$expression?(this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000003,"webpanda-for-is"))):"function"==typeof(e=this.createValueFunction())&&(this.abstractNodeTree.command["for-id"]=e,void(this.abstractNodeTree.commandTemplate["for-id"]=this.command)))},$is:function(){var e;return"undefined"!=typeof this.abstractNodeTree.command.is?(this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000002,"webpanda-is"))):(this.$expression=m(this.value).trim(),""==this.$expression?(this.abstractNodeTree.commandError=!0,this.abstractNodeTree.error(this.command,M(20000003,"webpanda-is"))):(e=new p,this.$this=e.name("THIS").toString(),this.analyseExpression(),e="var "+this.$this+"=this;\n",e+="return (Boolean(function(){try{return "+this.$expression+";}catch(e){"+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+'");return false;}}()));',"function"==typeof(e=this.createFunction(e))&&(this.abstractNodeTree.command.is=e,void(this.abstractNodeTree.commandTemplate.is=this.command))))},$attribute:function(){if(this.$expression=m(this.value).trim(),""==this.$expression)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000003,"webpanda-attribute"));if(0==this.key.indexOf("webpanda-attribute-")){var e=this.key.replace(/^webpanda\-attribute\-/,"");if(""==e)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000005,"webpanda-attribute"));e=this.createAttrClassStyleSingleFunction(e)}else e=this.createAttrStyleFunction();if("function"!=typeof e)return!1;this.pushCommandMultipleAppend("attribute",e)},$class:function(){if(this.$expression=m(this.value).trim(),""==this.$expression)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000003,"webpanda-class"));if(0==this.key.indexOf("webpanda-class-")){var e=this.key.replace(/^webpanda\-class\-/,"");if(""==e)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000006,"webpanda-class"));e=this.createAttrClassStyleSingleFunction(e)}else e=this.createValueFunction();if("function"!=typeof e)return!1;this.pushCommandMultipleAppend("class",e)},$style:function(){if(this.$expression=m(this.value).trim(),""==this.$expression)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000003,"webpanda-style"));if(0==this.key.indexOf("webpanda-style-")){var e=this.key.replace(/^webpanda\-style\-/,"");if(""==e)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000007,"webpanda-style"));e=this.createAttrClassStyleSingleFunction(e)}else e=this.createAttrStyleFunction();if("function"!=typeof e)return!1;this.pushCommandMultipleAppend("style",e)},$on:function(){if(this.$expression=m(this.value).trim(),""==this.$expression)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000003,"webpanda-on*[-on*]"));var e=this.key.split("-on"),t=(e.splice(0,1),new Array);for(i in e)e[i]=m(e[i]).trim(),""!=e[i]&&t.push(e[i]);if(t.length<1)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000008,"webpanda-on*[-on*]"));var n=new p,n=(this.$this=n.name("THIS").toString(),this.$event=n.name("EVENT").toString(),this.analyseExpression(),"var "+this.$this+"=this;\n"),r=(n=(n=(n=(n+="var "+this.$event+"=$event;\n")+"return (function(){\n"+"\t\t try{\n")+("\t\t\t "+this.$expression+";\n")+"\t\t }catch(e){\n")+("\t\t\t "+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+'");return undefined; \n'),this.createFunction(n=n+"\t\t }\n"+"})();",!0));if("function"!=typeof r)return!1;this.pushCommandTemplate("event",this.command),"undefined"==typeof this.abstractNodeTree.command.event&&(this.abstractNodeTree.command.event=new Object);for(var i=0;i<t.length;i++)"undefined"==typeof this.abstractNodeTree.command.event[t[i]]&&(this.abstractNodeTree.command.event[t[i]]=new Array),this.abstractNodeTree.command.event[t[i]].push(r)},$template:function(){if("undefined"!=typeof this.abstractNodeTree.command.template)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000002,"webpanda-template"));if(this.$expression=m(this.value).trim(),""!==this.$expression){var e=new p,e=(this.$this=e.name("THIS").toString(),e.name("STRING").toString());this.analyseExpression();var t=(t=(t=(t=(t=(t=(t="var "+this.$this+"=this;\n")+"return (function(){\n"+"\t try{\n")+("\t\t var "+e+"="+this.$expression+";\n")+("\t\t if(typeof "+e+" == 'string' || typeof "+e+" == 'number'){\n"))+("\t\t\t return "+e+";\n")+"\t\t }else{\n")+("\t\t\t throw "+this.$this+".language(30000005,'"+this.value.replace(/\'/g,"\\'").replace(/\"/g,'\\"')+"');\n"))+"\t\t }\n"+"\t }catch(e){\n")+("\t\t "+this.$this+".exception("+this.$this+'.abstractNodeTree,"'+this.createExceptionCommand()+'",e,"'+this.$this+"\");return ''; \n");if("function"!=typeof(e=this.createFunction(t=t+"\t }\n"+"})();")))return!1}else e=!0;this.abstractNodeTree.command.template=e,this.abstractNodeTree.commandTemplate.template=this.command},$webpanda:function(){if("undefined"!=typeof this.abstractNodeTree.command.webpanda)return this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000002,"webpanda-webpanda"));this.abstractNodeTree.command.webpanda=!0,this.abstractNodeTree.commandTemplate.webpanda=this.command},$element:function(){var e;return this.$expression=m(this.value).trim(),""==this.$expression?(this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000003,"webpanda-element"))):"function"==typeof(e=this.createHandleFunction())&&void this.pushCommandMultipleAppend("element",e)},$before:function(){var e;return this.$expression=m(this.value).trim(),""==this.$expression?(this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000003,"webpanda-before"))):"function"==typeof(e=this.createHandleFunction())&&void this.pushCommandMultipleAppend("before",e)},$after:function(){var e;return this.$expression=m(this.value).trim(),""==this.$expression?(this.abstractNodeTree.commandWarning=!0,this.abstractNodeTree.warning(this.command,M(20000003,"webpanda-after"))):"function"==typeof(e=this.createHandleFunction())&&void this.pushCommandMultipleAppend("after",e)}},p.prototype={constructor:p,name:function(e){return this.identifier=e,this},toString:function(){return"$_TEMPLATE_"+this.identifier+"_"+this.timestamp+"__"}},y.prototype={constructor:y,PREFIX_OF_RULE:"#__Webpandajs_CommandShield_",SUFFIX_OF_RULE:"_END__ ",append:function(e){this.numbers++;var t=this.prefix+String(this.numbers)+y.prototype.SUFFIX_OF_RULE;return this.replace.push({rule:t,restore:e}),t},reset:function(e){return this.data=e,this},toString:function(){var e=this.data;if(0<this.replace.length)for(var t=this.replace.length-1;0<=t;t--)e=e.split(this.replace[t].rule).join(this.replace[t].restore);return e}},se.prototype={constructor:se,toString:function(){return this.concats.join("")},rule:/[\+\-\*\/\=\<\>\%\&\|\:\(\)\s\?\!\^\[\]\,\;\@\~]{1,}|[\`]{1}|[\{\}]{1,2}|(\$\{){1}/,keywords:["new","return","typeof","instanceof","debugger","false","true","null","undefined"],parse:function(){for(var e=0;e<this.splits.length;e++){var t,n=this.splits[e];this.templateSceneTag(n)||this.templateSceneExpression(n)||(this.index++,/\{/.test(n)&&this.objectScene.push({keyField:!1,arrayPattern:!1}),/\}/.test(n)&&this.objectScene.length&&this.objectScene.pop(),t=undefined,(t=this.objectScene.length?this.objectScene[this.objectScene.length-1]:t)&&(!t.arrayPattern&&/\[/.test(n)&&(t.arrayPattern=!0),/\]/.test(n)&&(t.arrayPattern=!1),!t.keyField&&/\:/.test(n)&&(t.keyField=!0),!t.arrayPattern)&&/\,/.test(n)&&(t.keyField=!1),0===n.indexOf("#")||0===n.indexOf(".")||this.rule.test(n)||/^\d+$/.test(n)||-1<this.keywords.indexOf(n)||t&&!t.keyField?this.concats[this.index]=n:"this"===n?this.concats[this.index]=this.command.$this+".data":(t=n.indexOf("this."),this.concats[this.index]=0===t?this.command.$this+".data."+n.slice("this.".length):this.command.$this+".data."+n))}},templateSceneTag:function(e){return!!/^\s{0,}\`\s{0,}$/.test(e)&&(this.templateScene.status?(this.index++,this.concats[this.index]=this.templateScene.pattern.join("+"),this.templateScene.status=!1,this.templateScene.printBefore="",this.templateScene.printAfter="",this.templateScene.printVariable="",this.templateScene.pattern=new Array):this.templateScene.status=!0,!0)},templateSceneExpression:function(e){var t;return!!this.templateScene.status&&("${"===this.templateScene.printBefore||"{{"===this.templateScene.printBefore?"}"===e||"}}"===e?(this.templateScene.printAfter+=e,("${"===this.templateScene.printBefore&&"}"===this.templateScene.printAfter||"{{"===this.templateScene.printBefore&&"}}"===this.templateScene.printAfter)&&(t=new se(this.templateScene.printVariable,this.command,this.commandShield),t="${"===this.templateScene.printBefore?this.command.$this+".print("+t.toString()+")":this.command.$this+".print("+this.command.$this+".encodeHTML("+t.toString()+"))",this.templateScene.pattern.push(t),this.templateScene.printBefore="",this.templateScene.printAfter="",this.templateScene.printVariable="")):this.templateScene.printVariable+=e:/^\s{0,}(\$\{|\{{2})\s{0,}$/.test(e)?this.templateScene.printBefore+=m(e).trim():(e=e.replace(/\n/g,"\\n").replace(/\r/g,"\\r"),t=this.commandShield.append("'"+e+"'"),this.templateScene.pattern.push(t)),!0)}},x.prototype={constructor:x,fixedRenderCommand:{$if:"if",$elseif:"else-if",$is:"is",$for:"for",$template:"template",$print:"print",$webpanda:"webpanda",$children:"children",$textareaElement:"element-textarea",$textareaElementGlobal:"element-textarea-global",$svgElement:"element-svg",$svgElementGlobal:"element-svg-global",$event:"event"},isRenderCommand:function(e){if(this.isInitialize())return!0;if(0<=this.renderSetting.publisher.commandList.indexOf(e))return!0;if(!this.abstractNodeTree.renderStatus)return!0;var t,n=[this.fixedRenderCommand.$if,this.fixedRenderCommand.$elseif,this.fixedRenderCommand.$is];for(t in e!==this.fixedRenderCommand.$children&&e!==this.fixedRenderCommand.$webpanda||(n.push(this.fixedRenderCommand.$template),n.push(this.fixedRenderCommand.$print)),n)if(0<=this.renderSetting.publisher.commandList.indexOf(n[t]))return!0;return!1},isInitialize:function(){return!this.renderSetting.publisher},setVirtualNodeRenderPermit:function(e,t){if(!e.deleted&&!e.commandError){e.renderPermit=!0;var n=e.parent||e.compiler.renderVirtualNode;if("function"!=typeof e.renderListener)n&&(e.renderPermit=n.renderPermit),e.renderPermit||(e.renderStatus=!1);else for(var r=t&&t instanceof K?t.commandList:null,i=(r&&r.length||(e.renderStatus=!1),e.renderStatus);n&&e.renderPermit;){if(!n.renderPermit){e.renderPermit=!1,i&&!n.isAggregate()&&n.renderSubscriber.set(e,r);break}n.renderStatus&&(i=!0),n=n.parent||n.compiler.renderVirtualNode}}},eventListener:function(e,t){var t=t||c.event,n=this.abstractNodeTree,r=this.renderEnvironment,i=this.abstractNodeTree.commandBuffer.event[e]||null;if(!i)return!1;var o=this.fixedRenderCommand.$event;this.renderEnvironment.restore(this.renderSetting,function(){r.abstractNodeTree=n;for(var e=0;e<i.length;e++)!1===r.context(n,o,function(){return i[e].call(r,undefined,t)},{disable:!0})&&(t.preventDefault?t.preventDefault():t.returnValue=!1)})},conditionalNextSiblingSelect:function(){var e=undefined;if("undefined"!=typeof this.renderSetting.group&&"undefined"!=typeof this.renderSetting.index)for(var t=parseInt(this.renderSetting.index)+1;t<this.renderSetting.group.length;t++){var n=this.renderSetting.group[t];if(n.isElement()){if("undefined"!=typeof n.command["else-if"]){e=n;break}if("undefined"==typeof n.command["else"])break;e=n;break}}return e},conditionalNextSiblingCheck:function(){var e,t;this.isInitialize()||(e=this.conditionalNextSiblingSelect())&&(t=[this.fixedRenderCommand.$if,this.fixedRenderCommand.$elseif],this.abstractNodeTree.renderSubscriber.set(e,t,{global:!0}))},conditionalPreviousSiblingCheck:function(){try{if("undefined"==typeof this.renderSetting.group||"undefined"==typeof this.renderSetting.index||0==this.renderSetting.index)throw!0;for(var e=!1,t=parseInt(this.renderSetting.index)-1;0<=t;t--){var n=this.renderSetting.group[t];if(n.isElement()){if("undefined"!=typeof n.command["if"]){(n.commandError||n.templateError||n.commandBuffer["if"])&&(e=!0);break}if("undefined"==typeof n.command["else-if"])throw!0;if(n.commandError||n.templateError){e=!0;break}n.commandBuffer["else-if"]&&(e=!0)}}return e}catch(r){return this.abstractNodeTree.templateError=!0,this.abstractNodeTree.commandError=!0,"undefined"!=typeof this.abstractNodeTree.commandTemplate["else-if"]?this.abstractNodeTree.error(this.abstractNodeTree.commandTemplate["else-if"],M(20000009,"webpanda-else-if")):this.abstractNodeTree.error(this.abstractNodeTree.commandTemplate["else"],M(20000009,"webpanda-else")),!0}},clearFrontForCommand:function(){var e,t=this.abstractNodeTree.front,n=this.abstractNodeTree.attributeTemplate["webpanda-for"];for(e in this.abstractNodeTree.attributeTemplate["webpanda-if"]&&(n=n.concat(this.abstractNodeTree.attributeTemplate["webpanda-if"])),this.abstractNodeTree.attributeTemplate["webpanda-else-if"]&&(n=n.concat(this.abstractNodeTree.attributeTemplate["webpanda-else-if"])),this.abstractNodeTree.attributeTemplate["webpanda-else"]&&(n=n.concat(this.abstractNodeTree.attributeTemplate["webpanda-else"])),n=this.abstractNodeTree.attributeTemplate["webpanda-template"]?n.concat(this.abstractNodeTree.attributeTemplate["webpanda-template"]):n)t=t.replace(" "+n[e],"");return t},clearVirtualNodeChildren:function(){if(this.abstractNodeTree.clear(),this.abstractNodeTree.node&&this.abstractNodeTree.node.childNodes)for(;this.abstractNodeTree.node.childNodes.length;)this.abstractNodeTree.node.removeChild(this.abstractNodeTree.node.firstChild);this.abstractNodeTree.removeChildren(),this.abstractNodeTree.children=new Array},createElementValue:function(e,t){var n,r,i,o=e.command,a=e.commandGlobal,e=e.isInnerHTML,s=o+"Node",o=o+"Value",c=!1,u=("undefined"==typeof this.abstractNodeTree.commandBuffer[s]&&(this.abstractNodeTree.commandBuffer[s]=h.createElement("div"),c=!0),this.abstractNodeTree.commandBuffer[s]),s=((c||this.isInitialize())&&this.abstractNodeTree.children&&this.abstractNodeTree.children.length&&(n=this.abstractNodeTree,r=this.renderSetting,i=this.renderEnvironment,this.renderEnvironment.context(this.abstractNodeTree,a,function(){for(var e=new ce({group:n.children,each:r.each}),t=0;t<n.children.length;t++)e.index=t,new x(u,n.children[t],i,e)},{global:!0}),this.renderEnvironment.abstractNodeTree=this.abstractNodeTree),""),a=(e?"undefined"!=typeof u.innerHTML&&(s=u.innerHTML):"undefined"!=typeof u.textContent?s=u.textContent:"undefined"!=typeof u.innerText&&(s=u.innerText),!1);this.abstractNodeTree.commandBuffer[o]!==s&&(this.abstractNodeTree.commandBuffer[o]=s,a=!0),t(s,u,a,c)},queryVirtualNodeSelect:function(e,t,n){var r=undefined;if(!e.deleted){if(e.isVoid()){if(r=n.call(this,e.children,-1,t))return r}else if(e.node&&e.node.parentNode===t)return e;e.renderCompiler&&e.renderCompiler.virtualNodeList&&(r=n.call(this,e.renderCompiler.virtualNodeList,-1,t))}return r},queryVirtualNodeSequence:function(e,t,n){t<0&&(t=0);for(var r=undefined,i=t;i<e.length&&!(r=this.queryVirtualNodeSelect(e[i],n,this.queryVirtualNodeSequence));i++);return r},queryVirtualNodeReverse:function(e,t,n){t<0&&(t=e.length-1);for(var r=undefined,i=t;0<=i&&!(r=this.queryVirtualNodeSelect(e[i],n,this.queryVirtualNodeReverse));i--);return r},queryVirtualNodeFamily:function(){for(var e=new Array,t=this.abstractNodeTree;t;){if(t.parent){if(e.push({children:t.parent.children,virtualNode:t}),t.parent.isVoid()){t=t.parent;continue}break}if(e.push({children:t.compiler.virtualNodeList,virtualNode:t}),t.compiler.renderVirtualNode){if(e.push({children:t.compiler.renderVirtualNode.children,virtualNode:t}),t.compiler.renderVirtualNode.isVoid()){t=t.compiler.renderVirtualNode;continue}break}break}return e},queryVirtualNodeSibling:function(e,t){for(var n=undefined,r=0;r<e.length;r++){var i=e[r].children,o=e[r].virtualNode,a=-1;if(n=t(a=i&&i.length?i.indexOf(o):a,i))break}return n},queryVirtualNodePreviousSibling:function(e,r){var i=this;return this.queryVirtualNodeSibling(e,function(e,t){var n=undefined;return n=0<e?i.queryVirtualNodeReverse(t,--e,r):n})},queryVirtualNodeNextSibling:function(e,r){var i=this;return this.queryVirtualNodeSibling(e,function(e,t){var n=undefined;return n=-1<e?i.queryVirtualNodeSequence(t,++e,r):n})},queryVirtualNodeSelector:function(e){for(var t=new Object,n=e,r=undefined;n&&"object"==typeof n;){if(!(n instanceof f)){if(n instanceof HTMLElement){r=n;break}break}if("undefined"!=typeof t[n.index])break;n=(t[n.index]=n).selector}return r},append:function(){if(!this.parent||!this.abstractNodeTree||!this.abstractNodeTree.node)return!1;if("object"==typeof this.parent&&this.parent instanceof f){if(this.parent.node&&this.parent.node instanceof HTMLElement)var e=this.parent.node;else if(!(e=this.queryVirtualNodeSelector(this.parent)))return this.abstractNodeTree.warning("selector",M(30000006)),!1;return this.appendHTMLElement(e)}return this.parent instanceof HTMLElement?this.appendHTMLElement(this.parent):void 0},appendHTMLElement:function(t){var n=this.queryVirtualNodeFamily(),r=this.queryVirtualNodePreviousSibling(n,t),i=r?r.node:null,r=r?r.node.nextSibling:null;if((r=r?r:(n=this.queryVirtualNodeNextSibling(n,t))?n.node:null)===this.abstractNodeTree.node&&(r=null),this.abstractNodeTree.node.parentNode&&(n=!1,t!==this.abstractNodeTree.node.parentNode&&(n=!0),n=!(!i||i===this.abstractNodeTree.node.previousSibling)||n)&&this.abstractNodeTree.node.parentNode.removeChild(this.abstractNodeTree.node),t===this.abstractNodeTree.node.parentNode)return!0;try{return r?t.insertBefore(this.abstractNodeTree.node,r):t.appendChild(this.abstractNodeTree.node),!0}catch(e){return this.abstractNodeTree.warning("selector",e),!1}},appendChildren:function(e){if(this.abstractNodeTree.children&&this.abstractNodeTree.children.length){var t=new ce({group:this.abstractNodeTree.children,each:this.renderSetting.each});this.isInitialize()||this.abstractNodeTree.isAggregate()||(t.publisher=this.renderSetting.publisher.clone());for(var n=0;n<this.abstractNodeTree.children.length;n++)t.index=n,new x(e,this.abstractNodeTree.children[n],this.renderEnvironment,t);this.renderEnvironment.abstractNodeTree=this.abstractNodeTree}},$conditional:function(){var e=this.abstractNodeTree;return e.renderPermit=!1,e.command["if"]?(e.renderPermit=this.$if(),this.conditionalNextSiblingCheck()):e.command["else-if"]?(e.renderPermit=this.$elseIf(),this.conditionalNextSiblingCheck()):e.command["else"]&&(e.renderPermit=this.$else()),e.renderPermit||e.clear(),e.renderPermit},$if:function(){var e,t,n=this.fixedRenderCommand.$if;return this.isRenderCommand(n)&&(e=this.renderEnvironment,t=this.abstractNodeTree,this.renderEnvironment.context(this.abstractNodeTree,n,function(){t.commandBuffer["if"]=t.command["if"].call(e)})),!!this.abstractNodeTree.commandBuffer["if"]},$elseIf:function(){var e,t,n;return this.conditionalPreviousSiblingCheck()?this.abstractNodeTree.commandBuffer["else-if"]=!1:(e=this.fixedRenderCommand.$elseif,this.isRenderCommand(e)&&(t=this.renderEnvironment,n=this.abstractNodeTree,this.renderEnvironment.context(this.abstractNodeTree,e,function(){n.commandBuffer["else-if"]=n.command["else-if"].call(t)})),this.abstractNodeTree.commandBuffer["else-if"])},$else:function(){return this.conditionalPreviousSiblingCheck()?this.abstractNodeTree.commandBuffer["else"]=!1:this.abstractNodeTree.commandBuffer["else"]=!0},$template:function(){var e=this.fixedRenderCommand.$template;if(this.isRenderCommand(e)){if("function"!=typeof this.abstractNodeTree.command.template)return null;var t=this.renderEnvironment,n=this.abstractNodeTree.command.template,r=this.renderEnvironment.context(this.abstractNodeTree,e,function(){return n.call(t)}),i=this.abstractNodeTree;"undefined"!=typeof i.commandBuffer[e]&&i.commandBuffer[e]===r||(i.commandBuffer[e]=r,this.clearVirtualNodeChildren(),i.command["for"]?(e=this.clearFrontForCommand(),i.commandBuffer.forTemplate=e+r+i.back):""!==r&&((e=new b({template:r,parent:t.compiler})).parse(i),i.children=e.virtualNodeList))}},$for:function(){var h=this.fixedRenderCommand.$for;if(this.isRenderCommand(h)){"undefined"==typeof this.abstractNodeTree.commandBuffer.forTemplate&&(e=this.clearFrontForCommand(),this.abstractNodeTree.commandBuffer.forTemplate=e+this.abstractNodeTree.inner+this.abstractNodeTree.back,this.clearVirtualNodeChildren()),"undefined"==typeof this.abstractNodeTree.commandBuffer.forChildren&&(this.abstractNodeTree.commandBuffer.forChildren=new Object);var e,t,d=this.parent,l=this.renderSetting,f=this.isInitialize(),p=new Object,m=this.abstractNodeTree,y=this.abstractNodeTree.commandBuffer.forChildren,n=this.abstractNodeTree.command["for"],r=this.renderEnvironment;for(t in this.renderEnvironment.context(this.abstractNodeTree,h,function(){n.call(r,function(e,t,n,r,i,o,a){var s,c=v.subscribeIgnore.set(m,h),u=("function"==typeof m.command["for-id"]?"number"==typeof(s=m.command["for-id"].call(e))?s=String(s):"string"!=typeof s&&(s=null):s=null,null===s?"automatic-defined:"+String(t):"user-defined:"+s);p[u]?m.error(m.commandTemplate["for-id"],M(30000007,s)):("undefined"==typeof y[u]&&((s=new b({template:m.commandBuffer.forTemplate,parent:e.compiler})).parse(m),y[u]=s.virtualNodeList[0]),p[u]=!0,"undefined"==typeof m.children[t]?m.children.push(y[u]):m.children[t]!==y[u]&&(-1<(s=m.children.indexOf(y[u]))&&m.children.splice(s,1),m.children.splice(t,0,y[u])),s=new ce({group:m.children}),f||(s.publisher=l.publisher.clone()),s.index=t,s.each=new Array,g(l.each)&&(s.each=s.each.concat(l.each)),s.each.push({abstractNodeTree:m,forObject:n,key:r,index:t,valueName:i,keyName:o,indexName:a}),new x(d,m.children[t],e,s),c&&v.subscribeIgnore.remove(m,h))})}),y)p[t]||(this.abstractNodeTree.removeChildrenIndexOf(y[t]),delete y[t]);return null}},$is:function(){var e,t,n=this.fixedRenderCommand.$is;return this.isRenderCommand(n)&&(e=this.abstractNodeTree,t=this.renderEnvironment,this.renderEnvironment.context(this.abstractNodeTree,n,function(){e.commandBuffer.is=e.command.is.call(t)})),this.abstractNodeTree.renderPermit=Boolean(this.abstractNodeTree.commandBuffer.is),this.abstractNodeTree.renderPermit||this.abstractNodeTree.clear(),this.abstractNodeTree.renderPermit},$print:function(){var e,t=this.fixedRenderCommand.$print,n=this.renderEnvironment,r=this.abstractNodeTree;this.isRenderCommand(t)&&(e=this.renderEnvironment.context(r,t,function(){return r.command.print.call(n)}),"undefined"!=typeof r.commandBuffer[t]&&r.commandBuffer[t]===e||(r.commandBuffer[t]=e,this.clearVirtualNodeChildren(),""!==e&&((t=new b({template:e,commandSwitch:!1,parent:n.compiler})).parse(r),r.children=t.virtualNodeList)))},$webpanda:function(){var e=this.fixedRenderCommand.$webpanda;if(!this.isRenderCommand(e))return!1;var t=this;this.renderEnvironment.context(this.abstractNodeTree,e,function(){t.appendChildren(t.parent)})},$children:function(){var e,t=this.fixedRenderCommand.$children;this.isRenderCommand(t)&&(e=this).renderEnvironment.context(this.abstractNodeTree,t,function(){e.appendChildren(e.abstractNodeTree.node)})},$textareaElement:function(){var e=this.fixedRenderCommand.$textareaElement,t=this.fixedRenderCommand.$textareaElementGlobal,n=this.isRenderCommand(e),r=this.isRenderCommand(t);if(!n&&!r)return!1;var i={command:e,commandGlobal:t,isInnerHTML:!1},o=this,a=this.abstractNodeTree;this.renderEnvironment.context(this.abstractNodeTree,e,function(){o.createElementValue(i,function(e,t,n,r){n&&(a.node.value=e)})})},$svgElement:function(){var e=this.fixedRenderCommand.$svgElement,t=this.fixedRenderCommand.$svgElementGlobal,n=this.isRenderCommand(e),r=this.isRenderCommand(t);if(!n&&!r)return!1;var i={command:e,commandGlobal:t,isInnerHTML:!0},o=this,a=this.abstractNodeTree;this.renderEnvironment.context(this.abstractNodeTree,e,function(){o.createElementValue(i,function(e,t,n,r){if(n)if("undefined"==typeof a.node.innerHTML){for(var n=h.createElement("div"),i=(n.innerHTML="<svg>"+e+"</svg>",n.firstChild);a.node.firstChild;)a.node.removeChild(a.node.firstChild);for(;i.firstChild;)a.node.appendChild(i.firstChild)}else a.node.innerHTML=e})})},$handler:function(e,t){for(var n=this.renderEnvironment,r=0;r<e.length;r++){var i=e[r].functional,o=e[r].command;(t||this.isRenderCommand(o))&&this.renderEnvironment.context(this.abstractNodeTree,o,function(){i.call(n)},{disable:t})}},$attribute:function(){"undefined"==typeof this.abstractNodeTree.commandBuffer.attribute&&(this.abstractNodeTree.commandBuffer.attribute=new Object);for(var i=this.abstractNodeTree.commandBuffer.attribute,o=this.renderEnvironment,a=this.abstractNodeTree.node,e=this.abstractNodeTree.command.attribute,t=0;t<e.length;t++){var s=e[t].functional,n=e[t].command;this.isRenderCommand(n)&&this.renderEnvironment.context(this.abstractNodeTree,n,function(){var e,t,n=s.call(o);if(n&&"object"==typeof n)for(var r in n)e="function"==typeof n[r]?n[r]():n[r],"undefined"!=typeof i[r]&&i[r]===e||(i[r]=e,"input"==a.nodeName.toLowerCase()&&("checked"!=r.toLowerCase()||"checkbox"!=a.type&&"radio"!=a.type?"value"==r.toLowerCase()&&a.value!==e&&(a.value="string"!=typeof e&&"number"!=typeof e?"":e):a.checked=!!e),"textarea"==a.nodeName.toLowerCase()&&"value"==r.toLowerCase()&&a.value!==e&&(a.value="string"!=typeof e&&"number"!=typeof e?"":e),"option"==a.nodeName.toLowerCase()&&"selected"==r.toLowerCase()&&(a.selected=!!e),t=a.getAttribute(r),!1===e||null===e||e===undefined?null!==t&&a.removeAttribute(r):t!==e&&a.setAttribute(r,e))})}},$class:function(){"undefined"==typeof this.abstractNodeTree.commandBuffer["class"]&&(this.abstractNodeTree.commandBuffer["class"]=new Object);for(var e=this.abstractNodeTree.commandBuffer["class"],o=this.renderEnvironment,t=this.abstractNodeTree.command["class"],n=0;n<t.length;n++){var a=t[n].functional,r=t[n].command;if(this.isRenderCommand(r)){var s=!1,c=("undefined"==typeof e[n]&&(e[n]=new Object),e[n]),u=new Object;for(l in this.renderEnvironment.context(this.abstractNodeTree,r,function(){var e,t=a.call(o);if("function"==typeof t?t=t():"number"==typeof t&&(t=String(t)),"string"==typeof t){var n=t.trim();if(""===n)return;t=n.split(/\s+/g)}if(t&&"object"==typeof t)if(t instanceof Array)for(var r,i=0;i<t.length;i++)""!==(r="string"==typeof(r="number"==typeof(r=t[i])?String(r):r)?r.trim():r)&&(u[r]=!0,"undefined"!=typeof c[r]&&c[r]==u[r]||(s=!0));else for(var i in t)""!==(r=m(i).trim())&&(e="function"==typeof t[i]?t[i]():t[i],u[r]=Boolean(e),"undefined"!=typeof c[r]&&c[r]==u[r]||(s=!0))}),c)"undefined"==typeof u[l]&&(u[l]=!1,s=!0);if(s)for(var i in e[n]=u){var h,d=u[i];if(h=this.abstractNodeTree.node.className?this.abstractNodeTree.node.className.split(/\s+/):new Array,d)h.indexOf(i)<0&&h.push(i);else{for(var l,f=new Array,p=0;p<h.length;p++)(l=h[p])!=i&&f.indexOf(l)<0&&f.push(l);h=f}this.abstractNodeTree.node.setAttribute("class",h.join(" "))}}}""===this.abstractNodeTree.node.className&&this.abstractNodeTree.node.removeAttribute("class")},$style:function(){"undefined"==typeof this.abstractNodeTree.commandBuffer.style&&(this.abstractNodeTree.commandBuffer.style=new Object);for(var i=this.abstractNodeTree.commandBuffer.style,o=this.renderEnvironment,a=this.abstractNodeTree.node,e=this.abstractNodeTree.command.style,s=0;s<e.length;s++){var c=e[s].functional,t=e[s].command;this.isRenderCommand(t)&&this.renderEnvironment.context(this.abstractNodeTree,t,function(){var e,t=c.call(o);if(t&&"object"==typeof t)for(var n in t)if(e="function"==typeof t[n]?t[n]():t[n],"undefined"==typeof i[n]||i[n]!==e){i[n]=e;var r=m(n).trim();if(e&&e instanceof Array)for(;s<e.length&&(a.style[r]=e[0],a.style[r]!=e[0]);s++);else a.style[r]=e}})}""===this.abstractNodeTree.node.getAttribute("style")&&this.abstractNodeTree.node.removeAttribute("style")},$on:function(){if(this.isRenderCommand(this.fixedRenderCommand.$event)){"undefined"==typeof this.abstractNodeTree.commandBuffer.event&&(this.abstractNodeTree.commandBuffer.event=new Object);var e,n=this.abstractNodeTree.commandBuffer.event,r=this.abstractNodeTree.command.event,i=this.abstractNodeTree,o=this;for(e in r)!function(t){n[t]=new Array;for(var e=0;e<r[t].length;e++)n[t].push(r[t][e]);n[t].length?(i.eventBuffer[t]=function(e){o.eventListener(t,e)},"function"!=typeof i.eventListener[t]&&(i.eventListener[t]=function(e){"function"==typeof i.eventBuffer[t]&&i.eventBuffer[t](e)},D(i.node,t,i.eventListener[t]))):"undefined"!=typeof i.eventListener[t]&&(Q(i.node,t,i.eventListener[t]),delete i.eventListener[t])}(e)}}},ce.prototype={constructor:ce},ue.prototype={constructor:ue,context:function(e,t,n,r){r&&"object"==typeof r||(r=new Object);var i=Boolean(r.disable),r=Boolean(r.global),o=(r?(S.global[e.index]={abstractNodeTree:e,command:t},this.constructContext(e,r,function(){delete S.global[e.index]})):(S.local.abstractNodeTree&&S.localStack.push({abstractNodeTree:S.local.abstractNodeTree,command:S.local.command}),i?(S.local.abstractNodeTree=undefined,S.local.command=undefined,this.constructContext(e,r)):(S.local.abstractNodeTree=e,S.local.command=t,this.constructContext(e,r,function(){S.local.abstractNodeTree=undefined,S.local.command=undefined})),this.pushContext(e,r,function(){var e;S.localStack.length&&(e=S.localStack.pop(),S.local.abstractNodeTree=e.abstractNodeTree,S.local.command=e.command)})),v.subscribeStatus),a=v.publishStatus,i=(this.pushContext(e,r,function(){v.subscribeStatus=o,v.publishStatus=a}),undefined);try{i=n()}catch(s){e.error("[[render context]] "+t,s)}return this.destructContext(e,r),i},constructContext:function(e,t,n){this.destructContext(e,t),"function"==typeof n&&this.pushContext(e,t,n)},pushContext:function(e,t,n){t=t?this.globalContext:this.localContext,e=e.index;"undefined"==typeof t[e]&&(t[e]=new Array),t[e].push(n)},destructContext:function(t,n){n=n?this.globalContext:this.localContext,t=t.index;if("undefined"!=typeof n[t]){for(var r=n[t];r.length;){var i=r.shift();try{i()}catch(e){console.error(e)}}delete n[t]}},clearTempObserver:function(e){if(e.temp.length){for(var t=0;t<e.temp.length;t++)"undefined"!=typeof this.data[e.temp[t]]&&delete this.data[e.temp[t]];e.temp=new Array}},restore:function(e,t){var n=v.get(this.data),r=(n?this.clearTempObserver(n):n=new Z,S.global),i=new Object,o=undefined;try{if(e.each&&e.each.length)for(var a in e.each)if(!(o=e.each[a].abstractNodeTree)||o.deleted)o=undefined;else{var s=e.each[a].key,c=e.each[a].index,u=e.each[a].valueName,h=e.each[a].keyName,d=e.each[a].indexName;if(undefined!==u){if("undefined"==typeof i[u]){if("undefined"!=typeof this.data[u])throw M(30000002,u);i[u]=!0}if(this.data[u]=e.each[a].forObject[s],n.temp.push(u),undefined!==h){if("undefined"==typeof i[h]){if("undefined"!=typeof this.data[h])throw M(30000001,h);i[h]=!0}this.data[h]=s,n.temp.push(h)}if(undefined!==d){if("undefined"==typeof i[d]){if("undefined"!=typeof this.data[d])throw M(30000003,d);i[d]=!0}this.data[d]=c,n.temp.push(d)}}}}catch(m){o?(o.templateError=!0,o.error("webpanda-for",m)):console.warn(m)}try{var l=new Object;if(e.context){var f=e.context;for(c in f.global){var p=f.global[c];p.abstractNodeTree&&!p.abstractNodeTree.deleted&&(l[c]={abstractNodeTree:p.abstractNodeTree,command:p.command})}}S.global=l,t()}catch(m){console.warn(m)}S.global=r,this.clearTempObserver(n)},print:function(e){return"string"==typeof e||"number"==typeof e?e:""},encodeHTML:function(e){return _(e)},decodeHTML:function(e){return U(e)},language:function(){return M.apply(M,arguments)},exception:function(e,t,n,r){e.templateError=!0;n=W(n,r);return e.error(U(t),n)},precompileStatement:function(e,t,n){return new he(this,e,n).handle(t)}},he.prototype={constructor:he,handle:function(t){var n=t.toLowerCase();return"function"==typeof this[n]?this[n]():"function"==typeof this.renderEnvironment.onprecompilestatement?this.renderEnvironment.onprecompilestatement.call(ant,name,e):(this.virtualNode.warning(t,M(30000008,t)),undefined)},"#this":function(){return this.virtualNode},"#clear":function(){for(var e=[x.prototype.fixedRenderCommand.$template,x.prototype.fixedRenderCommand.$print],t=0;t<e.length;t++){var n=e[t];"undefined"!=typeof this.virtualNode.commandBuffer[n]&&delete this.virtualNode.commandBuffer[n]}},"#node":function(){return this.virtualNode.node},"#template":function(){return ant.getTemplate()},"#event":function(){return this.event},"#stoppropagation":function(){this.event&&"object"==typeof this.event&&("function"==typeof this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0)},"#preventdefault":function(){this.event&&"object"==typeof this.event&&("function"==typeof this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1)},"#disable":function(){v.subscribeStatus=!1,v.publishStatus=!1},"#disablesubscribe":function(){v.subscribeStatus=!1},"#disablepublish":function(){v.publishStatus=!1},"#enable":function(){v.subscribeStatus=!0,v.publishStatus=!0},"#enablesubscribe":function(){v.subscribeStatus=!0},"#enablepublish":function(){v.publishStatus=!0},"#html":function(){return this.virtualNode.node?this.virtualNode.node.innerHTML:""},"#text":function(){return this.virtualNode.node?"undefined"!=typeof this.virtualNode.node.innerText?this.virtualNode.node.innerText:"undefined"!=typeof this.virtualNode.node.textContent?this.virtualNode.node.textContent:"":""},"#value":function(){if(!this.virtualNode.node)return undefined;if("select"==this.virtualNode.tag.toLowerCase()&&this.virtualNode.isElement()){if("undefined"==typeof this.virtualNode.node.options)return undefined;if(this.virtualNode.node.multiple){for(var e=new Array,t=this.virtualNode.node.options.length,n=0;n<t;n++)this.virtualNode.node.options[n].selected&&e.push(this.virtualNode.node.options[n].value);return e}var r=this.virtualNode.node.options.selectedIndex;return r<0||"undefined"==typeof this.virtualNode.node.options[r]?"":this.virtualNode.node.options[r].value}return"undefined"!=typeof this.virtualNode.node.value?this.virtualNode.node.value:void 0},"#window":function(){return c},"#webpanda":function(){return V.getInstance()}},de.prototype={constructor:de,set:function(e,t,n){var n=Boolean(n&&n.global)?this.global:this.local,r=e.index;"undefined"==typeof n[r]?n[r]=new J(e,t):n[r].append(t)},conditionalStatus:function(e){if(!this.virtualNode.isConditional())return!0;var t=[x.prototype.fixedRenderCommand.$if,x.prototype.fixedRenderCommand.$elseif,x.prototype.fixedRenderCommand.$is];if(e&&e instanceof Array)for(var n=0;n<e.length;n++)if(0<=t.indexOf(e[n]))return!0;return!1},publish:function(e){if(e&&e instanceof K&&this.conditionalStatus(e.commandList)){var t=new Array;for(this.virtualNode.renderPermit&&t.push(this.local),t.push(this.global);t.length;){var n,r,i=t.pop();for(n in i)i.hasOwnProperty(n)&&((r=i[n])&&r instanceof J&&e.clone().trigger(r.virtualNode,r.commandList,!0),delete i[n])}}}};var S={global:{},local:{abstractNodeTree:undefined,command:undefined},localStack:new Array,clone:function(){var e,t={global:{}};for(e in S.global){var n=S.global[e];t.global[e]={abstractNodeTree:n.abstractNodeTree,command:n.command}}return t}};function w(e,t){this.origin="string"==typeof e?e:c.location.href,this.protocol="",this.user="",this.password="",this.domain="",this.port=-1,this.path=new Array,this.query=new Object,this.hashPath=new Array,this.hashQuery=new Object,this.hashStatus=!1,this.fileStatus=!1,this.absoluteStatus=!1,this.config=new le(t),N.parse(this,this.origin)}function le(e){this.toString=e&&"function"==typeof e.toString?e.toString:null}w.prototype={constructor:w,merge:function(e){return"string"==typeof e&&(e=new w(e)),N.merge(this,e)},toString:function(e){var t=N.build(this,e);return t="function"==typeof this.config.toString?this.config.toString.call(this,t,e):t}},le.prototype={constructor:le,merge:function(e){"function"==typeof e.toString&&(this.toString=e.toString)}};var N={option:{PROTOCOL:1,ACCOUNT:2,DOMAIN:4,PORT:8,PATH:16,QUERY:32,HASH_PATH:64,HASH_QUERY:128,HASH:192,HOST:14,ALL:255},parse:function(e,t){var n,r,i;"string"==typeof t&&(t=t.trim(),/^\/\/([^\/]+)/.test(t)&&(t=window.location.protocol+t),(n=/^([a-zA-Z_]+)\:\/\/([^\/\?\#]{0,})/.exec(t))&&(t=t.slice(n.index+n[0].length),e.protocol=n[1],undefined!==n[2])&&((r=/^([^\:\@]+)\:([^\@]+)\@([^\:]+)[\:]?(.*)?/.exec(n[2]))?(e.user=r[1],e.password=r[2],e.domain=r[3],"undefined"!=typeof r[4]&&(e.port=parseInt(r[4]))):(r=/^([^\:]+)[\:]?(.*)?/.exec(n[2]))&&(e.domain=r[1],"undefined"!=typeof r[2])&&(e.port=parseInt(r[2]))),(n=/^([^\?\#]+)/.exec(t))&&(t=t.slice(n.index+n[0].length),n[1].match(/^\//g)?e.absoluteStatus=!0:e.absoluteStatus=!1,n[1].match(/\/$/g)?e.fileStatus=!1:e.fileStatus=!0,n[1]=n[1].replace(/(^\/)|(\/$)/g,""),""!=n[1])&&(e.path=d(n[1].split("/"))),(n=/^([^\#]+)/.exec(t))&&(t=t.slice(n.index+n[0].length),e.query=N.parseQuery(n[1])),n=/^\#([^\#]+)?/.exec(t))&&(t=t.slice(n.index+n[0].length),e.hashStatus=!0,undefined!==n[1])&&(r=n[1],(t=/^([^\?\#]+)/.exec(r))&&(r=r.slice(t.index+t[0].length),t[1]=t[1].replace(/(^\/)|(\/$)/g,""),""!=t[1])&&(e.hashPath=d(t[1].split("/"))),i=/^([^\#]+)/.exec(r))&&(e.hashQuery=N.parseQuery(i[1]))},build:function(e,t){var n,r="";return(t=F(t)&&0!=t?t:N.option.ALL)&N.option.PROTOCOL&&""!=e.protocol&&(r=r+e.protocol+"://"),t&N.option.ACCOUNT&&(""!=e.user&&(r=r+e.user+":"),""!=e.password)&&(r=r+e.password+"@"),t&N.option.DOMAIN&&""!=e.domain&&(r+=e.domain),t&N.option.PORT&&0<=e.port&&(r=r+":"+e.port),t&N.option.PATH&&(0<e.path.length?(n=e.protocol.toLowerCase(),n=N.buildPath(e.path,"http"!=n&&"https"!=n),e.fileStatus||(n+="/"),""==r&&!e.absoluteStatus||(r+="/"),r+=n):e.absoluteStatus&&(r+="/")),""==r||!(t&N.option.QUERY||t&N.option.HASH_PATH||t&N.option.HASH_QUERY)||t&N.option.PATH&&(0!=e.path.length||e.absoluteStatus)||(r+="/"),t&N.option.QUERY&&0<Object.keys(e.query).length&&(r=(r+="?")+N.buildQuery(e.query)),(t&N.option.HASH_PATH||t&N.option.HASH_QUERY)&&(0<e.hashPath.length||0<Object.keys(e.hashQuery).length||e.hashStatus)&&(r+="#"),t&N.option.HASH_PATH&&0<e.hashPath.length&&(r+=N.buildPath(e.hashPath)),r=t&N.option.HASH_QUERY&&0<Object.keys(e.hashQuery).length?(r+="?")+N.buildQuery(e.hashQuery):r},merge:function(e,t){return"object"==typeof t&&(""!=t.protocol&&(e.protocol=t.protocol),""!=t.user&&(e.user=t.user),""!=t.password&&(e.password=t.password),""!=t.domain&&(e.domain=t.domain),0<=t.port&&(e.port=t.port),e.hashStatus=t.hashStatus,e.fileStatus=t.fileStatus,e.absoluteStatus=t.absoluteStatus,e.query=N.mergeQuery(e.query,t.query),e.path=N.mergePath(e.path,t.path),e.hashQuery=N.mergeQuery(e.hashQuery,t.hashQuery),e.hashPath=N.mergePath(e.hashPath,t.hashPath),e.config.merge(t.config)),e},mergeQuery:function(e,t){if(s(e)||(e=new Object),s(t))for(var n in t)e[n]=r(t[n]);return e},mergePath:function(e,t){if(g(e)||(e=new Array),g(t))for(var n=0;n<t.length;n++)n<e.length?e[n]=r(t[n]):e.push(r(t[n]));return e},parseQuery:function(e){for(var t=m(e).replace(/^(\?|\#){0,}/g,"").split("&"),n=new Object,r=0;r<t.length;r++){var i,o,a=t[r].split("="),s=a.shift(),a=a.join("=");s.match(/\[([^\[\]]*){0,}\]$/g)?""!=(o=(i=s.split("[")).shift())&&(n[o]=n[o]!==undefined?n[o]:new Object,n[o]=N.parseQueryChild(n[o],i,a)):n[s]=a}return n=d(n)},parseQueryChild:function(e,t,n){for(var r=t.shift().replace(/\]$/g,""),i=(r.match(/^\d$/g)&&(r=parseInt(r)),0);""==r&&0!==r;){if(e[i]===undefined){r=i;break}i++}return t.length?(e[r]=e[r]!==undefined?e[r]:new Object,e[r]=N.parseQueryChild(e[r],t,n)):e[r]=n,e},buildPath:function(e,t){var n="";if(g(e))for(var r,i=0;i<e.length;i++)r=t&&""==n?e[i]:o(e[i]),""!=n&&(n+="/"),n+=r;return n},buildQuery:function(e){var t="";if(e&&"object"==typeof e){for(var n in e){var r,i=N.buildQueryChild(e[n]);for(r in i)t+=(n=o(n))+i[r]+"&"}""!==t&&(t=t.slice(0,t.length-1))}return t},buildQueryChild:function(e){var t=new Array;if("object"==typeof e)for(var n in e){var r,i=N.buildQueryChild(e[n]);for(r in i)n=o(n),t.push("["+n+"]"+i[r])}else e="="+o(e),t.push(e);return t}};function fe(e){var t=P.getList(e.name);P.run(t,e.event)}function j(e){this.name=e.name,this.runtime=C.runtime,this.url=e.url;var t=P.getList(this.name);"onpage"===this.name?(this.setting=e.setting,this.page=e.page,this.stopPropagation=function(){t.length=0},t.length?P.recursionPageEvent(t,this,this.page):this.page(this.setting)):"onpageurlchange"===this.name?(this.accept=e.accept,this.ignore=e.ignore,this.stopPropagation=function(){t.length=0},t.length?P.recursionPageChangeEvent(t,this,this.accept):this.accept()):("onpageprogress"===this.name?(this.total=C.progress.total,this.loaded=C.progress.loaded,this.percent=C.progress.percent,this.step=C.progress.step):"onpagedestroy"!==this.name&&"onpagenotfound"!==this.name||(this.setting=e.setting),P.run(t,this))}function pe(e){this.name=e.name,this.runtime=C.runtime;var t=new Array;P.create(this.name,t,e.target),P.run(t,this)}function me(e){var t,n=P.getExecuteLaunchRender(e.name,e.projectStruct.project,e.args);n.length?(this.name=e.name,this.runtime=C.runtime,this.argument=e.args,t=e.projectStruct,this.state=t.executeState,this.version=t.executeVersion,this.start=function(){return 0!==t.executeState&&(t.executeState=1,t.executeEventState=1),t.executeState},this.pause=function(){return 0!==t.executeState&&(t.executeState=2,t.executeEventState=1),t.executeState},this.stop=function(){return 0!==t.executeState&&(t.executeState=0,t.executeEventState=1),t.executeState},this.stopPropagation=function(){n.length=0},P.recursionExecuteState(n,this,t,e.version,e.args,e.pageCallback,e.callback)):"function"==typeof e.callback&&e.callback()}function ye(e){var t,n=P.getExecuteLaunchRender(e.name,e.projectStruct.project,e.args);n.length?(this.name=e.name,this.runtime=C.runtime,this.argument=e.args,t=e.projectStruct,this.state=t.launchState,this.version=t.launchVersion,this.start=function(){return 0!==t.launchState&&(t.launchState=1,t.launchEventState=1),t.launchState},this.pause=function(){return 0!==t.launchState&&(t.launchState=2,t.launchEventState=1),t.launchState},this.stop=function(){return 0!==t.launchState&&(t.launchState=0,t.launchEventState=1),t.launchState},this.stopPropagation=function(){n.length=0},P.recursionLaunchState(n,this,t,e.version,e.args,e.executeCallback,e.callback)):"function"==typeof e.callback&&e.callback()}function T(e){var t,n=P.getExecuteLaunchRender(e.name,e.projectStruct.project,e.args);n.length?(this.name=e.name,this.runtime=C.runtime,this.argument=e.args,t=e.projectStruct,this.state=t.renderState,this.version=t.renderVersion,this.start=function(){return 0!==t.renderState&&(t.renderState=1,t.renderEventState=1),t.renderState},this.pause=function(){return 0!==t.renderState&&(t.renderState=2,t.renderEventState=1),t.renderState},this.stop=function(){return 0!==t.renderState&&(t.renderState=0,t.renderEventState=1),t.renderState},this.stopPropagation=function(){n.length=0},"onrenderobserver"==this.name&&(this.target=e.observer),P.recursionRenderState(n,this,t,e.version,e.args,e.launchCallback,e.callback)):"function"==typeof e.callback&&e.callback()}function ge(e){this.name=e.name,this.runtime=C.runtime,this.url=e.url;e=P.getList(this.name);P.run(e,this)}fe.prototype={constructor:fe},j.prototype={constructor:j},pe.prototype={constructor:pe},me.prototype={constructor:me},ye.prototype={constructor:ye},T.prototype={constructor:T},ge.prototype={constructor:ge};var P={run:function(e,t){if(e.length){var n=t.stopPropagation||null;for(t.stopPropagation=function(){e.length=0,"function"==typeof n&&n.apply(t,arguments)};e.length;)e.shift()(t)}},create:function(r,e,t){if(t instanceof Le){var n=R.getPropertyByProject(t);if(n&&n.eventListener&&(n.eventListener.hasOwnProperty(r)&&n.eventListener[r]&&"object"==typeof n.eventListener[r]))for(var i in n.eventListener[r])n.eventListener[r].hasOwnProperty(i)&&e.push(function(e,t){var n=function(){return t.apply(e,arguments)};return n.targetName=r,n.targetFunction=t,n.targetThis=e,n}(t,n.eventListener[r][i]))}},getList:function(t){var n=new Array;return C.event.isPageProject(t)&&P.create(t,n,C.project),C.event.callProject(t,function(e){C.project!==e&&P.create(t,n,e)}),n},getExecuteLaunchRender:function(e,t,n){var r,i,o=new Array,a="--"+e;return n&&"object"==typeof n&&"function"==typeof n[a]&&o.push((r=t,i=n[a],(n=function(){return i.apply(r,arguments)}).targetName=a,n.targetFunction=i,n.targetThis=r,n)),P.create(e,o,t),o},recursionPageEvent:function(t,n,r){var e=t.shift();n.page=function(e){t.length?(n.setting=e,P.recursionPageEvent(t,n,r)):r(e)},e(n)},recursionPageChangeEvent:function(e,t,n){var r=e.shift();t.accept=function(){e.length?P.recursionPageChangeEvent(e,t,n):n()},r(t)},recursionExecuteState:function(e,t,n,r,i,o,a){e.shift()(t),R.executeState(n,r,i,o,function(){e.length?P.recursionExecuteState(e,t,n,r,i,o,a):"function"==typeof a&&a()})},recursionLaunchState:function(e,t,n,r,i,o,a){e.shift()(t),R.launchState(n,r,i,o,function(){e.length?P.recursionLaunchState(e,t,n,r,i,o,a):"function"==typeof a&&a()})},recursionRenderState:function(e,t,n,r,i,o,a){e.shift()(t),R.renderState(n,r,i,o,function(){e.length?P.recursionRenderState(e,t,n,r,i,o,a):"function"==typeof a&&a()})}},E="--global",be="--local";function ve(){this.localProjectList=new Object,this.globalProjectList=new Object,this.listener=new $}ve.prototype={constructor:ve,createKey:function(e){e=R.getPropertyByProject(e);return e.name+" "+e.index},setting:function(e,t){var n,r=this.createKey(e),i=R.getStructByProject(e),o=new Array,a=this.settingParameter(i,t);for(n in"object"!=typeof i.eventUsage[E]&&(i.eventUsage[E]=new Object),a){var s,c=a[n],u=!1;c.isGlobal?(i.eventUsage[E][n]=c.isUsage,c.isUsage&&R.isDefineEventName(i,n)?("object"!=typeof this.globalProjectList[n]&&(this.globalProjectList[n]=new Object),"undefined"==typeof this.globalProjectList[n][r]&&(this.globalProjectList[n][r]=e,u=!0),this.localProjectList[n]&&"undefined"!=typeof this.localProjectList[n][r]&&(delete this.localProjectList[n][r],u=!1),"undefined"!=typeof i.eventUsage[n]&&delete i.eventUsage[n]):this.globalProjectList[n]&&"undefined"!=typeof this.globalProjectList[n][r]&&(delete this.globalProjectList[n][r],u=!0)):(i.eventUsage[n]=c.isUsage,c.isUsage&&R.isDefineEventName(i,n)?("object"!=typeof this.localProjectList[n]&&(this.localProjectList[n]=new Object),"undefined"==typeof this.localProjectList[n][r]&&(this.localProjectList[n][r]=e,u=!0),this.globalProjectList[n]&&"undefined"!=typeof this.globalProjectList[n][r]&&(delete this.globalProjectList[n][r],u=!1),"undefined"!=typeof i.eventUsage[E][n]&&delete i.eventUsage[E][n]):this.localProjectList[n]&&"undefined"!=typeof this.localProjectList[n][r]&&(delete this.localProjectList[n][r],u=!0)),u&&(s=null,$.prototype.simplifyNativeName(n,function(e,t){s={nodeName:e,eventName:t}}),s)&&o.push(s)}o.length&&C.event.listener.deploy(o)},settingParameter:function(e,t,n){t&&"object"==typeof t||(t=new Object);var r,i=new Object;for(r in t)if(t.hasOwnProperty(r))if(r===E||r===be){var o,a=Boolean(r===E);if(null!==t[r]&&"object"==typeof t[r])for(var s in t[r])t[r].hasOwnProperty(s)&&"string"==typeof(o=R.detectEventName(s))&&(i[o]={isUsage:Boolean(t[r][s]),isGlobal:a});else{var c=Boolean(t[r]);R.eachEventList(e,function(e){i[e]={isUsage:c,isGlobal:a}})}}else"string"==typeof(o=R.detectEventName(r))&&(i[o]={isUsage:Boolean(t[r]),isGlobal:!1});return i},clear:function(){this.localProjectList=new Object},callProject:function(e,t){var n=new Array;for("undefined"!=typeof this.localProjectList[e]&&n.push(this.localProjectList[e]),"undefined"!=typeof this.globalProjectList[e]&&n.push(this.globalProjectList[e]);n.length;){var r,i=n.shift();for(r in i){var o=i[r];R.status(o)&&t(o)}}},isPageProject:function(e){var t;return!(!C.project||!R.status(C.project))&&(t=this.createKey(C.project),"undefined"!=typeof this.localProjectList[e]&&"undefined"!=typeof this.localProjectList[e][t]||"undefined"!=typeof this.globalProjectList[e]&&"undefined"!=typeof this.globalProjectList[e][t])},isProject:function(e){return Boolean("undefined"!=typeof this.localProjectList[e]&&Object.keys(this.localProjectList[e]).length||"undefined"!=typeof this.globalProjectList[e]&&Object.keys(this.globalProjectList[e]).length)}};var xe="window",Se="document";function $(){this.window={node:c,list:new Object},this.document={node:h,list:new Object}}function we(){this.total=10,this.loaded=0,this.percent=0,this.step=0,this.completed=0,this.length=0,this.includes=new Object,this.projects=new Object}function L(e){this.title=h.title,this.url=new w(e),this.step=[new w(e)],this.index=0}function Ne(){this.backList=new Array,this.forwardList=new Array,this.current=undefined}function je(){this.pageMaximum=10,this.stepMaximum=10}$.prototype={constructor:$,deploy:function(e){if(C.status){var t,n=new Object;if(g(e)){if(e.length<1)return;for(var r=0;r<e.length;r++){var i=e[r];"undefined"!=typeof this["native"][i.eventName]&&0<=this["native"][i.eventName].indexOf(i.nodeName)&&("undefined"==typeof n[i.eventName]?n[i.eventName]=[i.nodeName]:n[i.eventName].push(i.nodeName))}}else n=this["native"];for(t in n)if(g(n[t]))for(var o=0;o<n[t].length;o++)!function(e,t,n){var r="on"+n+t;e.isAllow(r)?e.add(n,t,function(e){fe({name:r,event:e})}):e.remove(n,t)}(this,t,n[t][o])}},isAllow:function(e){return!!C.event.isProject(e)},add:function(e,t,n){e=this.select(e);"undefined"==typeof e.list[t]&&(e.list[t]=n,D(e.node,t,e.list[t]))},remove:function(e,t){e=this.select(e);"undefined"!=typeof e.list[t]&&(Q(e.node,t,e.list[t]),delete e.list[t])},select:function(e){return e===Se?this.document:this.window},appendNative:function(e,t){"undefined"!=typeof $.prototype["native"][t]?$.prototype["native"][t].indexOf(e)<0&&$.prototype["native"][t].push(e):$.prototype["native"][t]=[e]},"native":new Object,detectName:function(e,t){var n;return 0!==e.indexOf("on")?null:0<=t.indexOf(e)?e:0===e.indexOf("on"+xe)?(n=e.replace(new RegExp("^on"+xe),""),"undefined"!=typeof c["on"+n]?e:null):0===e.indexOf("on"+Se)?(n=e.replace(new RegExp("^on"+Se),""),"undefined"!=typeof h["on"+n]?e:null):(n=e.replace(/^on/,""),"undefined"!=typeof c["on"+n]?"on"+xe+n:"undefined"!=typeof h["on"+n]?"on"+Se+n:null)},simplifyNativeName:function(e,t){var n="";return 0===e.indexOf("on"+xe)?(n=e.replace(new RegExp("^on"+xe),""),"function"==typeof t&&t(xe,n)):0===e.indexOf("on"+Se)&&(n=e.replace(new RegExp("^on"+Se),""),"function"==typeof t)&&t(Se,n),n}},we.prototype={constructor:we,collect:function(e){var t,n;if(3==this.step)for(n in t=e?[e]:R.prepares){var r=R.getStructByProject(t[n]);if("undefined"==typeof this.projects[r.projectProperty.index])for(var i in"undefined"!=typeof R.prepares[r.projectProperty.index]&&(this.projects[r.projectProperty.index]=t[n],this.length++),r.include){i=r.include[i].include;i["async"]||i.executeStatus||"undefined"!=typeof this.includes[i.index]||(this.length++,this.includes[i.index]=i)}}},complete:function(e){if(e.constructor==Pe){if("undefined"==typeof this.includes[e.index])return}else if(e instanceof Le){e=R.getPropertyByProject(e);if("undefined"==typeof this.projects[e.index])return}this.completed++,this.make(0)},make:function(e){0<e&&(1==(this.step=e)&&(this.percent=0),1!=e&&4!=e||(this.completed=0,this.length=0,this.includes=new Object,this.projects=new Object),this.loaded=e<=3?2*e/this.total:(2*e+80)/this.total),3==this.step&&0<this.length&&(e=this.loaded,t=80/this.length*this.completed/this.total,t=6/this.total+t,this.loaded=t<e?e:t);var t,e=this.percent;this.percent=Math.floor(this.loaded/this.total*100),e<this.percent&&new j({name:"onpageprogress",url:C.url})}},L.prototype={constructor:L,change:function(e){this.title=h.title,this.url=new w(e)},getLastLength:function(){var e=this.step.length;return this.index+1>e&&(this.index=e-1),this.index},getNextLength:function(){var e=this.step.length;return this.index+1>e&&(this.index=e-1),e-this.index-1}},Ne.prototype={constructor:Ne,back:function(e){O.go(-1,e)},forward:function(e){O.go(1,e)},go:function(e){O.go(e,callback)},last:function(e){O.step(-1,e)},next:function(e){O.step(1,e)},step:function(e,t){O.step(e,t)}},je.prototype={constructor:je,config:function(e){e&&"object"==typeof e&&("undefined"!=typeof e.pageMaximum&&F(e.pageMaximum)&&(this.pageMaximum=e.pageMaximum),"undefined"!=typeof e.stepMaximum)&&F(e.stepMaximum)&&(this.stepMaximum=e.stepMaximum)}};var O={register:function(e){var t,n,r=O.instance;r.current&&"object"==typeof r.current&&r.current.constructor==L?("function"==typeof O.callback&&(O.callback(),O.clear()),n=e.toString(),t=N.option.PROTOCOL|N.option.HOST|N.option.PATH,e.toString(t)==r.current.url.toString(t)?(O.setStep(n),r.current.change(n)):(O.setPage(new L(n),!1),r.backList.length&&(n=r.backList.pop()).url.toString(t)!==r.current.url.toString(t)&&r.backList.push(n),r.forwardList.length&&(n=r.forwardList.pop()).url.toString(t)!==r.current.url.toString(t)&&r.forwardList.push(n))):r.current=new L(e.toString())},instance:new Ne,callback:undefined,setPage:function(e,t){var n=O.instance;if(n.current&&"object"==typeof n.current&&n.current.constructor==L&&!(V.historyConfig.pageMaximum<=0)){var r=N.option.PROTOCOL|N.option.HOST|N.option.PATH;if(e.url.toString(r)==n.current.url.toString(r))n.current.change(e.url.toString());else{var i=n.current;if(t){if(n.forwardList.length)if(n.forwardList[n.forwardList.length-1].url.toString(r)==i.url.toString(r))return;V.historyConfig.pageMaximum<=n.forwardList.length&&n.forwardList.shift(),n.forwardList.push(i)}else{if(n.backList.length)if(n.backList[n.backList.length-1].url.toString(r)==i.url.toString(r))return;V.historyConfig.pageMaximum<=n.backList.length&&n.backList.shift(),n.backList.push(i)}n.current=e}}},setStep:function(e){var t=O.instance;if(t.current&&"object"==typeof t.current&&t.current.constructor==L&&!(V.historyConfig.stepMaximum<=0)){t=t.current;if("undefined"!=typeof t.step[t.index-1])if(t.step[t.index-1].toString()==e)return void(t.index=t.index-1);if("undefined"!=typeof t.step[t.index])if(t.step[t.index].toString()==e)return;if("undefined"!=typeof t.step[t.index+1])if(t.step[t.index+1].toString()==e)return void(t.index=t.index+1);var n=t.getLastLength(),r=t.getNextLength();V.historyConfig.stepMaximum<=n&&0<n&&(0<r?t.step.pop():t.step.shift()),t.step.splice(t.index+1,0,new w(e)),t.index++}},clear:function(){O.callback=undefined},go:function(e,t){if(e=Number(e),!isNaN(e)){"function"==typeof O.callback&&(O.callback(),O.clear());var n,r,i,o=O.instance,a=!1;if(e<0){var s=o.backList;e=Math.abs(e),a=!0}else{if(!(0<e))return;s=o.forwardList}s.length<e||(n=e,r=s.length-e,o=(i=s[r]).url.toString(),O.callback=function(){s.splice(r,n),O.setPage(i,a)},"function"==typeof t?t(o):"function"==typeof c.history.pushState?c.history.pushState(null,"",o):c.location.assign(o))}},step:function(e,t){e=Number(e);var n,r=O.instance;r.current&&"object"==typeof r.current&&r.current.constructor==L&&!isNaN(e)&&("function"==typeof O.callback&&(O.callback(),O.clear()),n=r.current,0!=e)&&"undefined"!=typeof n.step[n.index+e]&&(r=n.step[n.index+e].toString(),O.callback=function(){n.index=n.index+e},"function"==typeof t?t(r):"function"==typeof c.history.pushState?c.history.pushState(null,"",r):c.location.assign(r))}},C={runtime:0,firstStatus:!1,project:null,event:new ve,url:null,state:0,status:!1,renderProjects:new Object,obsoleteRenderProjects:new Object,render:function(e,t,n){"undefined"!=typeof C.obsoleteRenderProjects[e]&&delete C.obsoleteRenderProjects[e],n?"undefined"!=typeof C.renderProjects[e]&&delete C.renderProjects[e]:C.renderProjects[e]=t},run:function(e){for(var t in new j({name:"onpagedestroy",url:C.url,setting:e}),C.renderProjects){C.obsoleteRenderProjects[t]=C.renderProjects[t];var n=C.renderProjects[t];n.compiler&&(n.compiler.observerSwitch=!1,n.compiler.renderSwitch=!1),delete C.renderProjects[t]}0==C.state?(C.firstStatus=!0,C.state=1):1==C.state?(C.firstStatus=!1,C.state=2):4==C.state?(C.firstStatus=!0,C.state=2):C.firstStatus=!1,C.runtime=(new Date).valueOf(),C.project=undefined,C.url=undefined,C.status=!1,a.clear();var r=new w;C.before(e,r)},before:function(t,n){C.event.clear(),C.progress.make(1),new j({name:"onpage",url:n,setting:t,page:function(e){C.load(e=void 0===e?t:e,n)}})},load:function(e,t){if(!e||"object"!=typeof e||"string"!=typeof e.name&&"number"!=typeof e.name)return C.error("load",M(50000001,t.toString())),new j({name:"onpagenotfound",url:t,setting:e}),C.after(),!1;if(C.progress.make(2),!e.src)return C.prepare(e,t);var n=k.create({src:e.src,type:"js","async":!1});if(!n)return C.error("load",M(50000003,e.name)),!1;var r=function(){if(1==C.state)return C.state=4,C.warning("load",M(50000005,H)),n.executeStatus=!1,C.run(e),!1;C.error("load",M(50000004,e.name,e.src)),new j({name:"onpagenotfound",url:t,setting:e}),C.after()},i=function(){return C.prepare(e,t)};if(n.executeStatus){if(!n.resultStatus)return void n.wait.push(new Ee({resultArgument:!0,onresolve:i,onreject:r}));if(!n.errorStatus)return C.prepare(e,t)}n.execute(i,r)},prepare:function(e,t){var n=R.getProjectByName(e.name);if(!n)return C.error("prepare",M(50000002,e.name)),new j({name:"onpagenotfound",url:t,setting:e}),C.after(),!1;t=R.getPropertyByProject(n);if(t["abstract"])C.error("prepare",M(50000007,t.name));else{if(e&&R.isNameTypeof(e.clone)){var r=R.getProjectByName(e.clone);if(!r)if(!(r=R.clone(t,e.clone)))return void C.error("prepare",M(40000009,e.name,e.clone));n=r}C.progress.make(3),C.progress.collect(n),C.begin(e,n)}},begin:function(t,e){C.project=e,C.url=new w;var n=R.getPropertyByProject(C.project);return R.ready(n,function(){var e=new Object;return e[be]=!0,n.event(e),R.execute(n,t.argument,function(){C.after()})})},after:function(){for(var e in C.progress.make(8),C.project?O.register(C.url):O.clear(),C.obsoleteRenderProjects){var t=C.obsoleteRenderProjects[e];t.compiler&&t.compiler.clear(),delete C.obsoleteRenderProjects[e]}C.progress.make(9),new j({name:"onpaged",url:C.url}),C.status=!0,C.event.listener.deploy(),C.progress.make(10)},isCurrentProject:function(e){return!!C.project&&!!R.status(e)&&C.project===e},progress:new we,error:function(e,t){t="undefined"==typeof(t=void 0===t?"":t).stack?t:t+"\n===============================================\n"+t.stack;console.error("Webpanda PageError:\n\n┍---------------------------------------------┑\n\n["+e+"] "+t+"\n\n┕---------------------------------------------┙\n")},warning:function(e,t){t="undefined"==typeof(t=void 0===t?"":t).stack?t:t+"\n===============================================\n"+t.stack;console.warn("Webpanda PageWarning:\n\n┍---------------------------------------------┑\n\n["+e+"] "+t+"\n\n┕---------------------------------------------┙\n")}};function Te(){this.mode="hash",this.listener=!0,this.pageEvent=!0}Te.prototype={constructor:Te,isModeHistory:function(){return Boolean("history"===this.mode)},config:function(e){e&&"object"==typeof e&&("string"==typeof e.mode&&(this.mode=e.mode),"undefined"!=typeof e.listener&&(this.listener=e.listener),"undefined"!=typeof e.pageEvent)&&(this.pageEvent=!!e.pageEvent)}};var I={queue:new G,intervalId:undefined,originUrl:null,running:!1,changing:!1,run:function(){V.routerConfig.listener&&!I.running&&(I.running=!0,I.originUrl=new w,"interval"===m(V.routerConfig.listener).trim().toLowerCase()?I.interval():I["native"]())},"native":function(){D(c,"hashchange",function(){I.change()}),D(c,"popstate",function(){I.change()});var e=c.history.pushState,t=(c.history.pushState=function(){e.apply(c.history,arguments),I.change()},c.history.replaceState);c.history.replaceState=function(){t.apply(c.history,arguments),I.change()}},interval:function(){if("undefined"!=typeof I.intervalId)return!1;var e=!1;I.intervalId=setInterval(function(){e||(e=!0,I.queue.run(function(){I.change(),e=!1}))},0)},change:function(){if(!I.changing){I.changing=!0;var e=new w;if(V.routerConfig.pageEvent){var t,n,r=V.routerConfig.isModeHistory();if(n=r?(t=I.originUrl.toString(N.option.PATH),e.toString(N.option.PATH)):(t=I.originUrl.toString(N.option.HASH_PATH),e.toString(N.option.HASH_PATH)),t!==n)return void new j({name:"onpageurlchange",url:e,accept:function(){I.originUrl=e,I.changing=!1,C.run()},ignore:function(){r?c.history.pushState(null,"",I.originUrl.toString()):(I.originUrl.hashStatus=!0,c.location.assign(I.originUrl.toString())),O.clear(),I.changing=!1}})}I.originUrl.toString()!==e.toString()?(O.register(e),I.originUrl=e,I.changing=!1,new ge({name:"onurlchange",url:e})):I.changing=!1}}};function Pe(e){e&&"object"==typeof e||(e=new Object),Object.defineProperty(this,"index",{value:i.create(i.type.include),writable:!1,configurable:!1}),this.result="",this.resultStatus=!1,this.executeStatus=!1,this.errorStatus=!1,this.error="",this["async"]=Boolean(e["async"]),this.type="string"==typeof e.type?e.type:"text",this.location="string"==typeof e.location?e.location:"",this.map="string"==typeof e.map?e.map:"",this.wait=new Array,this.url=undefined,"number"==typeof e.url||"string"==typeof e.url?this.url=new w(m(e.url)):"object"==typeof e.url&&e.url.constructor==w?this.url=e.url:this.url=new w("")}function Ee(e){this.resultArgument=!!e.resultArgument,this.instance="undefined"!=typeof e.instance?e.instance:undefined,this.onfinally="function"==typeof e.onfinally?e.onfinally:null,this.onresolve="function"==typeof e.onresolve?e.onresolve:null,this.onreject="function"==typeof e.onreject?e.onreject:null}function $e(){this.handler=null}Pe.prototype={constructor:Pe,waited:function(){for(;this.wait.length;){var e=this.wait.shift();this.errorStatus?"function"==typeof e.onreject&&(e.resultArgument?e.onreject():e.onreject.call(e.instance,this)):"function"==typeof e.onresolve&&(e.resultArgument?e.onresolve():e.onresolve.call(e.instance,this)),"function"==typeof e.onfinally&&(e.resultArgument?e.onfinally():e.onfinally.call(e.instance,this))}},execute:function(t,n){var e=!(this.executeStatus=!0),r=this;V.pluginExecution(new Fe(V.pluginType.include,[r,{receive:function(){e=!0},resolve:function(e){r.result=e,r.resultStatus=!0,r.errorStatus=!1,C.progress.complete(r),"function"==typeof t&&t(),r.waited()},reject:function(e){r.error=e,r.resultStatus=!0,r.errorStatus=!0,V.error(e),C.progress.complete(r),"function"==typeof n&&n(),r.waited()}}])),e||V.error(M(10001e3,V.pluginType.include))}},Ee.prototype={constructor:Ee},$e.prototype={constructor:$e,config:function(e){void 0!==e&&(this.handler=e)}};var k={includes:new Object,create:function(e){if("object"==typeof e.src&&e.src.constructor==w)var t=e.src;else{if("string"!=typeof e.src&&"number"!=typeof e.src)return null;t=new w(m(e.src))}"string"==typeof e.type&&!u(e.type)||""===(n=t.toString(N.option.PATH))||(e.type=n.split(".").pop().toLowerCase().trim()),u(e.type)&&(e.type="text"),"undefined"==typeof k.includes[e.type]&&(k.includes[e.type]=new Object);var n=t.toString(N.option.ALL&~N.option.HASH);return"undefined"==typeof k.includes[e.type][n]&&(k.includes[e.type][n]=new Pe({url:t,location:n,type:e.type,"async":e["async"],map:"["+e.type+"]["+n+"]"})),k.includes[e.type][n]},trigger:function(e,t,n){var r="function"==typeof t.onfinally?t.onfinally:null,i="function"==typeof t.onresolve?t.onresolve:null,t="function"==typeof t.onreject?t.onreject:null;e.resultStatus?(e.errorStatus?t&&t.call(n,e):i&&i.call(n,e),r&&r.call(n,e)):(r||i||t)&&e.wait.push(new Ee({resultArgument:!1,instance:n,onfinally:r,onresolve:i,onreject:t}))},struct:function(e,t,n){var r=e;if(g(r="string"==typeof r||s(r)||r instanceof w?[r]:r))for(var i=0;i<r.length;i++){if("string"==typeof r[i]||"object"==typeof r[i]&&r[i].constructor==w)var o={src:r[i]};else{if(!s(r[i]))continue;o=r[i]}n(o)}}};function Le(){}function Oe(e,t,n){Object.defineProperty(t,"$",{value:this,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"_",{value:n,writable:!0,enumerable:!1,configurable:!0}),this["abstract"]=!0,this.index=i.create(i.type.project),this.name=e,this.base=new Me("base"),this.derived=new Me("derived"),this.prototype=n,this.ready=function(e){return R.readyByName(this.name,e)},this.readyState=function(){return R.readyStateByName(this.name)},this.clone=function(e){return R.clone(this,e)},this.remove=function(){return R.remove(this),Object.keys(R.projects).length},Object.preventExtensions(this)}function Ce(e,t,n){Object.defineProperty(t,"$",{value:this,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"_",{value:n,writable:!0,enumerable:!1,configurable:!0}),this.index=i.create(i.type.project),this.name=e,this.base=new Me("base"),this.derived=new Me("derived"),this.eventListener=new Object,this.tag=new Object,this.prototype=n,this.ready=function(e){return R.readyByName(this.name,e)},this.readyState=function(){return R.readyStateByName(this.name)},this.clone=function(e){return R.clone(this,e)},this.compiler=null,this.template=function(e,t){return R.template(this,e,t)},this.templateClear=function(e){var t=R.getStructByIndex(this.index);return!!t.template.clear(e)&&(R.compilerSyncTemplate(t),!0)},this.selector=function(e){return R.selector(this,e)},this.event=function(e){var t=R.getStructByIndex(this.index);return void 0===e?r(t.eventUsage):(C.event.setting(t.project,e),this)},this.page=function(e){return C.run({name:this.name,argument:e}),this},this.execute=function(e){return R.execute(this,e),this},this.launch=function(e){return R.launch(this,e),this},this.render=function(e){return R.render(this,e),this},this.start=function(){var e=R.getStructByIndex(this.index);return 0!==e.executeState&&(e.executeState=1,e.executeEventState=1),0!==e.launchState&&(e.launchState=1,e.launchEventState=1),0!==e.renderState&&(e.renderState=1,e.renderEventState=1),this},this.pause=function(){var e=R.getStructByIndex(this.index);return 0!==e.executeState&&(e.executeState=2,e.executeEventState=1),0!==e.launchState&&(e.launchState=2,e.launchEventState=1),0!==e.renderState&&(e.renderState=2,e.renderEventState=1),this},this.stop=function(){var e=R.getStructByIndex(this.index);return 0!==e.executeState&&(e.executeState=0,e.executeEventState=1),0!==e.launchState&&(e.launchState=0,e.launchEventState=1),0!==e.renderState&&(e.renderState=0,e.renderEventState=1),this},this.remove=function(){return R.remove(this),Object.keys(R.projects).length},Object.preventExtensions(this)}function Ie(e,t,n,r){(R.structs[t.index]=this).project=e,this.projectProperty=t,this.origin=n,this.clone=r||undefined,this.compiler=undefined,this.selector="undefined"!=typeof n.selector?n.selector:undefined,this.event=new Object,this.eventUsage=new Object,this.include=new Array,this.includeState=0,this.extend=new Array,this.extendState=0,this.extendSelector=undefined,this.extendTemplate=undefined,this.extendInclude=new Array,this.extendArrangeList=new Array,this.mount=new Array,this.mountState=0,this.template=new Ve,this.templateState=0,this.templateString=undefined,this.construct="undefined"!=typeof n.construct?n.construct:undefined,this.prototype="undefined"!=typeof n.prototype?n.prototype:undefined,this.renderSelector=null,this.renderVersion=0,this.renderState=1,this.renderTimer=undefined,this.renderEventState=0,this.executeState=1,this.executeTimer=undefined,this.executeVersion=0,this.executeEventState=0,this.launchState=1,this.launchTimer=undefined,this.launchVersion=0,this.launchEventState=0,this.readyState=0,this.readyCallback=null,this.readyWait=new Array,this.readyIncludeJavascriptList=new Object,this.readyIncludeSyncList=new Object,this.readyExtendList=new Object,this.readyMountList=new Object;var i=this;this.createInclude(n.include,function(e){i.include.push(e)}),this.createExtend(n.extend),this.createMount(n.mount),this.createTemplate(n.template),this.createEventListener()}function ke(e,t){this.ready="undefined"!=typeof t.ready&&t.ready,this.queue=F(t.queue)?t.queue:null,this.template="undefined"!=typeof t.template&&t.template,this.onfinally="function"==typeof t.onfinally?t.onfinally:null,this.onresolve="function"==typeof t.onresolve?t.onresolve:null,this.onreject="function"==typeof t.onreject?t.onreject:null,this.src="undefined"!=typeof t.src?t.src:undefined;var n=null;null===(n="string"==typeof this.src||"object"==typeof this.src&&this.src.constructor==w?this.src:n)?this.include=null:this.include=k.create({src:n,"async":"undefined"==typeof t["async"]||Boolean(t["async"]),type:t.type||""})}function A(e,t){this.name=R.isNameTypeof(t.name)?t.name:null,this.clone=R.isNameTypeof(t.clone)?t.clone:undefined;var n=undefined,n=("string"==typeof t.use&&""!==t.use||"number"==typeof t.use?n=t.use:"undefined"!=typeof t.use&&!t.use||(n="undefined"!=typeof this.clone?this.clone:this.name),this.use=n,undefined);"string"==typeof t.tag&&""!==t.tag||"number"==typeof t.tag?n=t.tag:t.tag&&(n="undefined"==typeof this.use?"undefined"!=typeof this.clone?this.clone:this.name:this.use),this.tag=n,this.errorStatus=!1}function Ae(e,t){this.name=R.isNameTypeof(t.name)?t.name:null,this.ignore=new Be(t.ignore),this.errorStatus=!1}function Be(e){e&&"object"==typeof e||(e=new Object),this.extend=this.format(e.extend,function(e,t){R.isNameTypeof(t)&&e.push(t)}),this.event=this.format(e.event,function(e,t){0===t.indexOf("on")&&"string"==typeof(t=R.detectEventName(t))&&e.push(t)}),this.mount=this.format(e.mount,function(e,t){R.isNameTypeof(t)&&e.push(t)}),this.include=this.format(e.include,function(e,t){if("object"==typeof t&&t instanceof w)var n=t;else{if("string"!=typeof t&&"number"!=typeof t)return;n=new w(m(t))}t=n.toString(N.option.ALL&~N.option.HASH);e.push(t)}),this.selector=this.format(e.selector,function(e,t){R.isNameTypeof(t)&&e.push(t)}),this.template=this.format(e.template,function(e,t){R.isNameTypeof(t)&&e.push(t)}),this.prototype=this.format(e.prototype,function(e,t){"string"!=typeof t&&"number"!=typeof t||e.push(t)}),this.construct=this.format(e.construct,function(e,t){"string"!=typeof t&&"number"!=typeof t||e.push(t)})}function Re(e,t,n,r,i){this.selfStruct=e,this.parentStruct=t,this.immediateStruct=n,this.ignoreList=new Array;for(var o=0;o<i.length;o++)this.ignoreList.push(i[o]);this.ignoreList.push(r)}function Me(e){Object.defineProperty(this,"index",{value:i.create(i.type.relation),writable:!1,configurable:!1}),Object.defineProperty(this,"length",{value:0,writable:!0,enumerable:!1}),Object.defineProperty(this,"relation",{value:e,writable:!1,enumerable:!1})}function Ve(){this.content="",this.indexes=new Object}Le.prototype={constructor:Le},Oe.prototype={constructor:Oe},Ce.prototype={constructor:Ce},Ie.prototype={constructor:Ie,appendEvent:function(e,t,n){!n&&this.event.hasOwnProperty(e)&&"function"==typeof this.event[e]||(this.event[e]=t)},appendMount:function(e,t,n){"string"!=typeof e&&"number"!=typeof e||(this.projectProperty.prototype[e]=n),"string"!=typeof t&&"number"!=typeof t||(this.projectProperty.tag[t]=n)},appendProperty:function(e,t,n){for(var r in t){var i;!t.hasOwnProperty(r)||"function"==typeof n&&n(r)||(i="function"==typeof t[r]?function(e,t,n){var r=function(){return t.apply(e,arguments)};return r.targetName=n,r.targetFunction=t,r.targetThis=e,r}(this.project,t[r],r):t[r],e[r]=i)}},createInclude:function(e,t){var n=this.project;k.struct(e,this.project,function(e){e=new ke(0,e);e.include&&t(e)})},createExtend:function(e){var t=e;if(g(t="string"!=typeof t&&!s(t)?t:[t]))for(var n=0;n<t.length;n++){if("string"==typeof t[n]){if(u((r={name:t[n]}).name))continue}else{if(!s(t[n]))continue;var r=t[n]}var i,o=new Ae(0,r);null!==o.name&&("undefined"!=typeof r.src&&(i=this).createInclude({src:r.src,type:"js","async":!1},function(e){i.include.push(e)}),this.extend.push(o))}},createMount:function(e){var t=e;if(g(t="string"!=typeof t&&!s(t)?t:[t]))for(var n,r=0;r<t.length;r++){if("string"==typeof t[r]){if(u((i={name:t[r]}).name))continue}else{if(!s(t[r]))continue;var i=t[r]}this.createMountResolve(i)&&"undefined"!=typeof i.src&&(n=this).createInclude({src:i.src,type:"js","async":!1},function(e){n.include.push(e)})}},createMountResolve:function(e){var t=new Array;if("undefined"!=typeof e.clone&&null!==e.clone)if("string"==typeof e.clone||"number"==typeof e.clone)t.push(new A(0,{name:e.name,clone:e.clone,use:!0,tag:!1}));else if(e.clone instanceof Array)for(var n=0;n<e.clone.length;n++){var r=e.clone[n];"string"==typeof r?t.push(new A(0,{name:e.name,clone:r,use:!0,tag:!1})):r&&"object"==typeof r&&R.isNameTypeof(r.name)&&t.push(new A(0,{name:e.name,clone:r.name,use:r.use,tag:r.tag||!1}))}else"object"==typeof e.clone&&R.isNameTypeof(e.clone.name)&&t.push(new A(0,{name:e.name,clone:e.clone.name,use:e.clone.use,tag:e.clone.tag||!1}));0<t.length?(e.use||e.tag)&&t.unshift(new A(0,{name:e.name,clone:undefined,use:"undefined"==typeof e.use?null:e.use,tag:e.tag})):t.push(new A(0,{name:e.name,clone:undefined,use:e.use,tag:e.tag}));for(var i=!1,n=0;n<t.length;n++)null!==t[n].name&&(this.mount.push(t[n]),i=!0);return i},createTemplate:function(e){var t,i,o=e;"string"==typeof(o=o instanceof w?{src:o}:o)?(this.templateState=1,this.template.insert(o),this.templateString=o):s(o)&&(this.templateState=1,"undefined"!=typeof o.src)&&(i=(t=this).projectProperty,this.createInclude({src:o.src,type:"text","async":!1},function(e){var n=i.index,r=o;e.template=!0,e.onresolve=function(e){var t=R.getStructByProject(this);!t||t.projectProperty.index!==n&&0!==t.templateState||t.projectProperty.template(e.result,r)},t.include.push(e)}))},createEventListener:function(){for(var e in this.origin){var t,e=e.toLowerCase();0===e.indexOf("on")&&("string"==typeof(t=R.detectEventName(e))?($.prototype.simplifyNativeName(t,function(e,t){$.prototype.appendNative(e,t)}),this.appendEvent(t,this.origin[e],!0)):R.warning("event",M(40000008,this.projectProperty.name,e)))}},initializePrototype:function(e,t){var n=new Object;"function"==typeof e?R.context(this.project,function(){return e.call(n)}):s(e)&&(n=r(e)),this.appendProperty(this.projectProperty.prototype,n,t)},initializeConstruct:function(e,t){var n=new Object;"function"==typeof e?R.context(this.project,function(){return e.call(n)}):s(e)&&(n=r(e)),n.hasOwnProperty("$")&&delete n.$,n.hasOwnProperty("_")&&delete n._,this.appendProperty(this.project,n,t)},initializeMount:function(e,t){for(var n=0;n<e.length;n++){var r=null,i=e[n];if(!i.errorStatus){var o=i.getProjectRealName();if("function"==typeof t&&t(o))continue;var r=i.getProject(),a=R.getStructByProject(r);a&&(1===a.readyState||2===a.readyState)||R.error("mount",M(40000002,this.projectProperty.name,o))}this.appendMount(i.use,i.tag,r)}},initializeEvent:function(e,t){if(!this.projectProperty["abstract"]){var n,r=e.event,i=R.createStringPrimaryKey(e);for(n in r)"function"==typeof t&&t(n)||("undefined"==typeof this.projectProperty.eventListener[n]&&(this.projectProperty.eventListener[n]=new Object),this.projectProperty.eventListener[n][i]=r[n])}},createRenderSelector:function(e){var t=undefined;e&&void 0!==e?t=e:this.selector&&"undefined"!=typeof this.selector&&(t=this.selector),void 0!==t&&t.constructor==f?this.renderSelector=t:void 0!==t&&(this.renderSelector=z(t),this.renderSelector||R.warning("render",M(40000004,this.projectProperty.name,n(t)||F(t)?t:"("+typeof t+")")))},ready:function(e){if(0!==this.readyState)return e?e():undefined;this.readyState=2,this.readyCallback=e,C.progress.collect(this.project),this.readyInclude()},readyInclude:function(){if(this.includeState=2,this.include.length){for(var e=new Array,t=new Object,n=0;n<this.include.length;n++)this.readyIncludeRegister(this.include[n]),(null===this.include[n].queue?e:(t[this.include[n].queue]||(t[this.include[n].queue]=new Array),t[this.include[n].queue])).push(this.include[n]);for(n=0;n<e.length;n++)this.readyIncludeReady(e[n]);this.readyIncludeQueue(t)}else this.includeState=1,this.readyExtend()},readyIncludeRegister:function(e){var t=e.include.index;e.include["async"]||("js"==e.include.type?this.readyIncludeJavascriptList[t]=e:this.readyIncludeSyncList[t]=e)},readyIncludeReady:function(e){var t=this;this.readyIncludeExecute(e,function(){t.readyIncludeCallback(e)})},readyIncludeQueue:function(e){var t=Object.keys(e);if(t.length){t.sort(function(e,t){return e-t});for(var n=new Array,r=0;r<t.length;r++)for(var i=e[t[r]];i.length;)n.push(i.shift());this.readyIncludeRecursion(n)}},readyIncludeRecursion:function(e){var t=e.shift(),n=this;this.readyIncludeExecute(t,function(){n.readyIncludeCallback(t),e.length&&n.readyIncludeRecursion(e)})},readyIncludeCallback:function(e){e=e.include.index,"undefined"!=typeof this.readyIncludeJavascriptList[e]&&delete this.readyIncludeJavascriptList[e],"undefined"!=typeof this.readyIncludeSyncList[e]&&delete this.readyIncludeSyncList[e],e=Boolean(Object.keys(this.readyIncludeJavascriptList).length);Boolean(Object.keys(this.readyIncludeSyncList).length)||e||(this.includeState=1),e||(0===this.extendState?this.readyExtend():this.readyStateCheck())},readyIncludeExecute:function(e,t){return e.include.executeStatus?e.include.resultStatus?t():void e.include.wait.push(new Ee({resultArgument:!0,onfinally:t})):e.include.execute(t,t)},readyExtend:function(){if(this.extendState=2,this.extend.length){for(var e=0;e<this.extend.length;e++)this.readyExtendRegister(this.extend[e]);for(e=0;e<this.extend.length;e++)this.readyExtendReady(this.extend[e])}else this.extendState=1,this.readyMount()},readyExtendRegister:function(e){var t;e.errorStatus||((t=e.register(this))?this.readyExtendList[t.projectProperty.index]=t:e.errorStatus=!0)},readyExtendReady:function(e){var t,n;e.errorStatus?Object.keys(this.readyExtendList).length||(this.extendState=1,this.readyMount()):(e=e.getProject(),t=R.getStructByProject(e),(n=this).readyProjectCheck(t,function(){"undefined"!=typeof n.readyExtendList[t.projectProperty.index]&&delete n.readyExtendList[t.projectProperty.index],Object.keys(n.readyExtendList).length||(n.extendState=1,n.readyMount())}))},readyMount:function(){if(this.mountState=2,this.mount.length){for(var e=0;e<this.mount.length;e++)this.readyMountRegister(this.mount[e]);for(e=0;e<this.mount.length;e++)this.readyMountReady(this.mount[e])}else this.mountState=1,this.readyStateCheck()},readyMountRegister:function(e){var t;e.errorStatus||((t=e.register(this))?this.readyMountList[t.projectProperty.index]=t:e.errorStatus=!0)},readyMountReady:function(e){var t,n;e.errorStatus?Object.keys(this.readyMountList).length||(this.mountState=1,this.readyStateCheck()):(e=e.getProject(),t=R.getStructByProject(e),(n=this).readyProjectCheck(t,function(){"undefined"!=typeof n.readyMountList[t.projectProperty.index]&&delete n.readyMountList[t.projectProperty.index],Object.keys(n.readyMountList).length||(n.mountState=1,n.readyStateCheck())}))},readyProjectStatus:function(e){var t=[this],n=new Object;for(n[this.projectProperty.index]=!0;t.length;){var r=t.pop();if("undefined"!=typeof r.readyExtendList[e])return!0;if("undefined"!=typeof r.readyMountList[e])return!0;if(Object.keys(r.readyExtendList).length)for(var i in r.readyExtendList)n[i]||t.push(r.readyExtendList[i]);if(Object.keys(r.readyMountList).length)for(var i in r.readyMountList)n[i]||t.push(r.readyMountList[i])}return!1},readyProjectCheck:function(e,t){return 2!==e.readyState?1===e.readyState?t():R.ready(e.projectProperty,t):e.readyProjectStatus(this.projectProperty.index)?t():void e.readyWait.push(function(){return t()})},readyStateCheck:function(){1===this.includeState&&1===this.mountState&&1===this.extendState&&2===this.readyState&&this.readyInitialize()},readyInitialize:function(){this.readyState=3,this.readyInitializeExtend(),this.readyInitializeMount(),this.readyInitializePrototype(),this.readyInitializeConstruct(),this.readyInitializeEvent(),this.readyInitialized(),this.readied()},readyInitializeExtend:function(){for(var e=0;e<this.extend.length;e++){var t=this.extend[e];if(!t.errorStatus){var n=t.getProject(),r=R.getStructByProject(n);if(r)if(r==this)R.error("ready",M(40000011,this.projectProperty.name));else{r.projectProperty.base["in"](this.project)&&R.error("ready",M(40000001,this.projectProperty.name,r.projectProperty.name)),this.projectProperty.base.append(r.project,t.ignore),r.projectProperty.derived.append(this.project,t.ignore);for(var n=new Re(this,r,this,t.ignore,[]),i=0;i<r.extendArrangeList.length;i++){var o=r.extendArrangeList[i];t.ignore.checkExtend(o.immediateStruct.projectProperty.name,o.parentStruct.projectProperty.name)||o.parentStruct===this||(o.parentStruct.projectProperty.base["in"](this.project)&&R.error("ready",M(40000001,this.projectProperty.name,o.parentStruct.projectProperty.name)),o=new Re(this,o.parentStruct,o.immediateStruct,t.ignore,o.cloneIgnoreList()),this.extendArrangeList.push(o),this.projectProperty["abstract"])||o.initialize()}this.extendArrangeList.push(n),this.projectProperty["abstract"]||n.initialize()}}}},readyInitializeMount:function(){this.projectProperty["abstract"]||this.initializeMount(this.mount)},readyInitializeEvent:function(){this.projectProperty["abstract"]||this.initializeEvent(this)},readyInitializePrototype:function(){this.projectProperty["abstract"]||this.initializePrototype(this.prototype)},readyInitializeConstruct:function(){this.projectProperty["abstract"]||this.initializeConstruct(this.construct)},readyInitialized:function(){if(!this.projectProperty["abstract"]){"undefined"==typeof this.selector&&"undefined"!=typeof this.extendSelector&&null!==this.extendSelector&&(this.selector=this.extendSelector),0===this.templateState&&"string"==typeof this.extendTemplate&&this.template.insert(this.extendTemplate),v.create(this.project);for(var e=0;e<this.extendInclude.length;e++)this.extendInclude[e].trigger(this);for(e=0;e<this.include.length;e++)this.include[e].trigger(this)}},readied:function(){for(C.progress.complete(this.project),this.readyState=1,new pe({name:"onready",target:this.project});this.readyWait.length;)this.readyWait.shift()();return this.readyCallback?this.readyCallback():undefined}},ke.prototype={constructor:ke,clone:function(e){return new ke(0,{ready:this.ready,queue:this.queue,template:this.template,onfinally:this.onfinally,onresolve:this.onresolve,onreject:this.onreject,src:this.src,"async":!this.include||this.include["async"],type:this.include?this.include.type:""})},trigger:function(e){this.ready||(this.ready=!0,k.trigger(this.include,this,e.project))}},A.prototype={constructor:A,register:function(e){var t,n,r=R.getProjectByName(this.name);return r?R.isNameTypeof(this.clone)?(n=R.getProjectByName(this.clone))?(t=R.getStructByProject(n)).clone&&t.clone.project===r?t:(R.warning("mount",M.prototype.concat(M(40000006,e.projectProperty.name,this.name),M(40000009,this.name,this.clone),M(40000003,this.clone))),!1):(t=R.getPropertyByProject(r),(n=R.clone(t,this.clone))?R.getStructByProject(n):(R.warning("mount",M.prototype.concat(M(40000006,e.projectProperty.name,this.name),M(40000009,this.name,this.clone))),!1)):R.getStructByProject(r):(R.warning("mount",M.prototype.concat(M(40000006,e.projectProperty.name,this.name),M(40000010,this.name))),!1)},getProject:function(){return R.getProjectByName(R.isNameTypeof(this.clone)?this.clone:this.name)},getProjectRealName:function(){return R.isNameTypeof(this.clone)?this.clone:this.name}},Ae.prototype={constructor:Ae,register:function(e){var t=R.getProjectByName(this.name);return t?R.getStructByProject(t):(R.warning("extend",M.prototype.concat(M(40000005,e.projectProperty.name,this.name),M(40000010,this.name))),!1)},getProject:function(){return R.getProjectByName(this.name)}},Be.prototype={constructor:Be,format:function(e,t){var n={global:null,local:null};if("string"==typeof e&&"*"===(e=e.trim()))n.global="*";else if(e&&"object"==typeof e){var r=e.global;if("string"==typeof r){if("*"===(r=r.trim()))return n.global="*",n}else if(r&&r instanceof Array){n.global=new Array;for(var i=0;i<r.length;i++)t(n.global,r[i])}var o=e.local;if(o&&"object"==typeof o)for(var a in n.local=new Object,o)if(o.hasOwnProperty(a)&&R.isNameTypeof(a)){var s=a,c=o[a];if("string"==typeof c)"*"===(c=c.trim())&&(n.local[s]="*");else if(c&&c instanceof Array){n.local[s]=new Array;for(i=0;i<c.length;i++)t(n.local[s],c[i])}}}return n},check:function(e,t,n){if(e&&"object"==typeof e){var r=e.global;if("string"==typeof r&&"*"===r)return!0;if(r&&r instanceof Array)for(var i=0;i<r.length;i++)if(n(r[i]))return!0;var o=e.local;if(o&&"object"==typeof o&&"string"==typeof(t="number"==typeof t?String(t):t))for(var a in o)if(String(a)===t){var s=o[a];if("string"==typeof s&&"*"===s)return!0;if(s&&s instanceof Array)for(i=0;i<s.length;i++)if(n(s[i]))return!0}}return!1},checkGlobal:function(e){var e=this[e]||null;return!(!e||"object"!=typeof e)&&"string"==typeof(e=e.global)&&"*"===e},checkExtend:function(e,t){return this.check(this.extend,e,function(e){return Boolean(String(e)===String(t))})},checkMount:function(e,t){return this.check(this.mount,e,function(e){return Boolean(String(e)===String(t))})},checkEvent:function(e,t){return this.check(this.event,e,function(e){return Boolean(String(e)===String(t))})},checkSelector:function(t){return this.check(this.selector,null,function(e){return Boolean(String(e)===String(t))})},checkTemplate:function(t){return this.check(this.template,null,function(e){return Boolean(String(e)===String(t))})},checkPrototype:function(e,t){return this.check(this.prototype,e,function(e){return Boolean(String(e)===String(t))})},checkConstruct:function(e,t){return this.check(this.construct,e,function(e){return Boolean(String(e)===String(t))})},checkInclude:function(e,t){return this.check(this.include,e,function(e){return Boolean(String(e)===String(t))})}},Re.prototype={constructor:Re,cloneIgnoreList:function(){for(var e=new Array,t=0;t<this.ignoreList.length;t++)e.push(this.ignoreList[t]);return e},isIgnoreGlobal:function(e){for(var t=0;t<this.ignoreList.length;t++)if(this.ignoreList[t].checkGlobal(e))return!0;return!1},isIgnoreSelector:function(){for(var e=0;e<this.ignoreList.length;e++)if(this.ignoreList[e].checkSelector(this.parentStruct.projectProperty.name))return!0;return!1},isIgnoreTemplate:function(){for(var e=0;e<this.ignoreList.length;e++)if(this.ignoreList[e].checkTemplate(this.parentStruct.projectProperty.name))return!0;return!1},isIgnorePrototype:function(e){for(var t=0;t<this.ignoreList.length;t++)if(this.ignoreList[t].checkPrototype(this.parentStruct.projectProperty.name,e))return!0;return!1},isIgnoreConstruct:function(e){for(var t=0;t<this.ignoreList.length;t++)if(this.ignoreList[t].checkConstruct(this.parentStruct.projectProperty.name,e))return!0;return!1},isIgnoreMount:function(e){for(var t=0;t<this.ignoreList.length;t++)if(this.ignoreList[t].checkMount(this.parentStruct.projectProperty.name,e))return!0;return!1},isIgnoreEvent:function(e){for(var t=0;t<this.ignoreList.length;t++)if(this.ignoreList[t].checkEvent(this.parentStruct.projectProperty.name,e))return!0;return!1},isIgnoreInclude:function(e){for(var t=0;t<this.ignoreList.length;t++)if(this.ignoreList[t].checkInclude(this.parentStruct.projectProperty.name,e))return!0;return!1},initialize:function(){this.initializeSelector(),this.initializeTemplate(),this.initializePrototype(),this.initializeConstruct(),this.initializeMount(),this.initializeEvent(),this.initializeInclude()},initializeSelector:function(){this.isIgnoreSelector()||"undefined"!=typeof this.parentStruct.selector&&null!==this.parentStruct.selector&&(this.selfStruct.extendSelector=this.parentStruct.selector)},initializeTemplate:function(){this.isIgnoreTemplate()||"string"==typeof this.parentStruct.templateString&&(this.selfStruct.extendTemplate=this.parentStruct.templateString)},initializePrototype:function(){var t;this.isIgnoreGlobal("prototype")||(t=this).selfStruct.initializePrototype(this.parentStruct.prototype,function(e){return t.isIgnorePrototype(e)})},initializeConstruct:function(){var t;this.isIgnoreGlobal("construct")||(t=this).selfStruct.initializeConstruct(this.parentStruct.construct,function(e){return t.isIgnoreConstruct(e)})},initializeMount:function(){var t;this.isIgnoreGlobal("mount")||(t=this).selfStruct.initializeMount(this.parentStruct.mount,function(e){return t.isIgnoreMount(e)})},initializeEvent:function(){var t;this.isIgnoreGlobal("event")||(t=this).selfStruct.initializeEvent(this.parentStruct,function(e){return t.isIgnoreEvent(e)})},initializeInclude:function(){for(var e=this.parentStruct.include,t=0;t<e.length;t++){var n=e[t];if(n.template){if(1===this.templateState||this.isIgnoreTemplate())continue}else if(this.isIgnoreInclude(n.include.location))continue;n=n.clone(this.selfStruct);n.include&&(n.ready=!1,this.selfStruct.extendInclude.push(n))}}},Me.prototype={constructor:Me,append:function(e,t){var n=R.getStructByProject(e),n=R.createStringPrimaryKey(n);"undefined"==typeof this[n]&&(this[n]={data:e,ignore:new Array,count:0},this.length++),this[n].ignore.push(t),this[n].count++},has:function(e){e=R.getStructByProject(e),e=R.createStringPrimaryKey(e);return Boolean("undefined"!=typeof this[e])},"in":function(e){for(var t=!1,n=this.relation,r=new Object,i=[this];i.length;){var o=i.pop();if(!r[o.index]){if(r[o.index]=!0,o.has(e)){t=!0;break}o.each(function(e){e=e.data,e=R.getPropertyByProject(e);i.push(e[n])})}}return t},each:function(e){if("function"==typeof e)for(var t in this)this.hasOwnProperty(t)&&"length"!==t&&"relation"!==t&&"index"!==t&&e(this[t])},remove:function(e){e=R.getStructByProject(e),e=R.createStringPrimaryKey(e);return"undefined"==typeof this[e]?null:(delete this[e],this.length--,!0)}},Ve.prototype={constructor:Ve,insert:function(e,t){if("string"!=typeof(e="number"==typeof e?String(e):e)||""===e)return!1;"number"!=typeof(t=t&&"object"==typeof t?t:{index:0}).index&&(t.index=parseFloat(t.index)),isNaN(t.index)&&(t.index=0),"string"==typeof t.mode?t.mode=t.mode.trim().toLowerCase():t.mode="";var n=String(t.index);return"string"!=typeof this.indexes[n]&&(this.indexes[n]=""),"prepend"===t.mode?this.indexes[n]=e+this.indexes[n]:"append"===t.mode?this.indexes[n]=this.indexes[n]+e:this.indexes[n]=e,this.render(),!0},render:function(){var e=Object.keys(this.indexes);if(e.length<1)this.content="";else{e.sort(function(e,t){return parseFloat(t)-parseFloat(e)}),this.content="";for(var t=0;t<e.length;t++)this.content+=this.indexes[e[t]]}return this.content},clear:function(e){if(void 0===e)this.indexes=new Object;else{if("string"!=typeof(e="number"==typeof e?String(e):e))return!1;if("undefined"==typeof this.indexes[e])return!1;delete this.indexes[e]}return this.render(),!0}};var He="--selector",B="--page",R={projects:new Object,structs:new Object,prepares:new Object,status:function(e){e=R.getPropertyByProject(e),e=e?e.index:undefined;return void 0!==e&&"undefined"!=typeof R.structs[e]},error:function(e,t){t="undefined"==typeof(t=void 0===t?"":t).stack?t:t+"\n===============================================\n"+t.stack;console.error("Webpanda DataError:\n\n┍---------------------------------------------┑\n\n["+e+"] "+t+"\n\n┕---------------------------------------------┙\n")},warning:function(e,t){t="undefined"==typeof(t=void 0===t?"":t).stack?t:t+"\n===============================================\n"+t.stack;console.warn("Webpanda DataWarning:\n\n┍---------------------------------------------┑\n\n["+e+"] "+t+"\n\n┕---------------------------------------------┙\n")},context:function(e,t){var n=V.getInstance(),r=undefined,i=n.data["this"];n.data["this"]=e;try{var o=t()}catch(a){r={error:a}}if(n.data["this"]=i,r)throw r.error;return o},getProjectByName:function(e){return R.projects[e]||undefined},getProjectByIndex:function(e){e=R.getStructByIndex(e);return e?e.project:undefined},getStructByIndex:function(e){return R.structs[e]||undefined},getPropertyByProject:function(e){return e?e.$:undefined},getStructByProject:function(e){e=R.getPropertyByProject(e);return e?R.getStructByIndex(e.index):undefined},definableEventList:["onpage","onpagenotfound","onpageprogress","onpaged","onpageurlchange","onpagedestroy","onurlchange","onready","onexecute","onexecuted","onexecutestart","onexecutepause","onexecutestop","onlaunch","onlaunched","onlaunchstart","onlaunchpause","onlaunchstop","onrender","onrendered","onrenderstart","onrenderpause","onrenderstop","onrenderobserver"],detectEventName:function(e){return $.prototype.detectName(e,R.definableEventList)},isDefineEventName:function(e,t){return e.projectProperty.eventListener&&e.projectProperty.eventListener.hasOwnProperty(t)&&"object"==typeof e.projectProperty.eventListener[t]},eachEventList:function(e,t){if(e.projectProperty.eventListener)for(var n in e.projectProperty.eventListener)e.projectProperty.eventListener.hasOwnProperty(n)&&"string"==typeof(n=R.detectEventName(n))&&t(n)},createStringPrimaryKey:function(e){return e.projectProperty.name+" "+e.projectProperty.index},createName:function(){for(var e="ABCDEFGHIJKLMNOPQRSTVUWXYZabcdefghijklmnopqrstvuwxyz1234567890",t=e.length,n="";;){for(var n=(new Date).valueOf().toString(),r=0;r<23;r++)n+=e.charAt(Math.floor(Math.random()*t));if("undefined"==typeof R.projects[n])break}return n},isNameTypeof:function(e){return"number"==typeof e||"string"==typeof e&&!u(e)},create:function(t,n,r){try{var i,o=new Le,a=Object.create(o);return i=new(n["abstract"]?Oe:Ce)(t,a,o),R.projects[t]=a,new Ie(a,i,n,r).readyState=0,R.prepares[i.index]=a}catch(e){R.error("create",e)}return null},builder:function(e){return e&&"object"==typeof e?(R.isNameTypeof(e.name)||(e.name=R.createName()),"undefined"==typeof R.projects[e.name]?R.create(e.name,e):(R.error("create",M(40000003,e.name)),R.getProjectByName(e.name))):undefined},clone:function(e,t){var n;return R.isNameTypeof(t)||(t=R.createName()),"undefined"==typeof R.projects[t]&&((n=r((e=R.getStructByIndex(e.index)).origin)).name=t,e=e.clone&&e.clone instanceof Ie?e.clone:e,R.create(t,n,e))},ready:function(e,t){var n=R.getStructByIndex(e.index);return 1===n.readyState?t?t():undefined:2!==n.readyState&&("undefined"!=typeof R.prepares[e.index]&&delete R.prepares[e.index],void n.ready(t))},readyByName:function(e,t){var n=null,n="function"==typeof t?{onresolve:t}:t;return R.wait(e,n),R.readyStateByName(e)},readyStateByName:function(e){e=R.getProjectByName(e);if(e){e=R.getStructByProject(e);if(e)return e.readyState}return-1},readyCheck:function(e,t){e=R.getProjectByName(e);if(e){var n=R.getStructByProject(e);if(1===n.readyState)return t(e),!0;0===n.readyState&&R.ready(n.projectProperty)}return!1},wait:function(e,t){s(t)||(t=new Object);var n,r,i=Boolean(t.global),o="function"==typeof t.onresolve?t.onresolve:null,a="function"==typeof t.onfinally?t.onfinally:null;R.readyCheck(e,function(e){o&&o.call(e,!0),a&&a.call(e,!0)})||(n=new l(function(){var t=this;R.readyCheck(e,function(e){t.stop(),o&&o.call(e,!0),a&&a.call(e,!0)})},i).interval(0).start(),F(t.timeout)&&(r="function"==typeof t.onreject?t.onreject:null,new l(function(){if(!n.status())return!1;n.stop(),r&&r(!1),a&&a(!1)},i).timeout(t.timeout).start()))},compiler:function(e,t){t&&"object"==typeof t||(t=new Object);t=R.getStructByIndex(e.index);return t.compiler&&"object"==typeof t.compiler&&t.compiler.constructor==b||(t.compiler=new b({template:t.template.content,reference:M(40000007,e.name)}),t.compiler.parse()),e},compilerSyncTemplate:function(e){e.compiler&&"object"==typeof e.compiler&&e.compiler.template!=e.template.content&&(e.compiler.template=e.template.content,e.compiler.parse())},template:function(e,t,n){var r=R.getStructByIndex(e.index);return void 0!==t?(r.template.insert(t,n)&&R.compilerSyncTemplate(r),e):r.template.content},selector:function(e,t){var n=R.getStructByIndex(e.index);return void 0!==t?(n.selector=t,n.createRenderSelector(t),e):n.renderSelector||(n.compiler?n.compiler.node:undefined)},execute:function(e,t,n){s(t)||(t=new Object),n?(t[B]=!0,C.progress.make(4)):t[B]=!1;var r=R.getStructByIndex(e.index),i=(r.executeTimer&&(r.executeTimer.stop(),r.executeTimer=undefined),r.executeVersion++,r.executeState=1,r.executeEventState=0,r.executeVersion);new me({name:"onexecute",projectStruct:r,version:i,args:t,pageCallback:n,callback:function(){t[B]&&C.progress.make(5),R.launch(e,t,function(){t[B]&&C.progress.make(6),R.executeState(r,i,t,n,function(){new me({name:"onexecuted",projectStruct:r,version:i,args:t,pageCallback:n,callback:function(){return t[B]&&C.progress.make(7),r.executeVersion=0,n?n():undefined}})})})}})},executeState:function(e,t,n,r,i){R.state("execute",e,t,n[B],i,r,function(){e.renderEventState=0,new me({name:"onexecutestart",projectStruct:e,version:t,args:n})},function(){e.renderEventState=0,new me({name:"onexecutepause",projectStruct:e,version:t,args:n})},function(){e.renderEventState=0,new me({name:"onexecutestop",projectStruct:e,version:t,args:n})})},launch:function(e,t,n){s(t)||(t=new Object),n||(t[B]=!1);var r=R.getStructByIndex(e.index),i=(r.launchTimer&&(r.launchTimer.stop(),r.launchTimer=undefined),r.launchVersion++,r.launchState=1,r.launchEventState=0,r.launchVersion);new ye({name:"onlaunch",projectStruct:r,version:i,args:t,executeCallback:n,callback:function(){R.render(e,t,function(){R.launchState(r,i,t,n,function(){new ye({name:"onlaunched",projectStruct:r,version:i,args:t,executeCallback:n,callback:function(){return r.launchVersion=0,n?n():undefined}})})})}})},launchState:function(e,t,n,r,i){R.state("launch",e,t,n[B],i,r,function(){e.launchEventState=0,new ye({name:"onlaunchstart",projectStruct:e,version:t,args:n})},function(){e.launchEventState=0,new ye({name:"onlaunchpause",projectStruct:e,version:t,args:n})},function(){e.launchEventState=0,new ye({name:"onlaunchstop",projectStruct:e,version:t,args:n})})},render:function(t,n,e){s(n)||(n=new Object);var r=R.getStructByIndex(t.index),i=(r.renderTimer&&(r.renderTimer.stop(),r.renderTimer=undefined),r.renderVersion++,r.renderState=1,r.renderEventState=0,r.renderVersion);new T({name:"onrender",projectStruct:r,version:i,args:n,launchCallback:e,callback:function(){n&&"object"==typeof n||(n=new Object),C.render(t.index,r,n["--global"]||!1),R.compiler(t,n),r.compiler.observerSwitch=!0,r.compiler.renderSwitch=!0,r.renderSelector&&"undefined"==typeof n[He]||r.createRenderSelector(n[He]||undefined),r.compiler.render({data:r.project,selector:r.renderSelector,onobserver:function(e){new T({name:"onrenderobserver",projectStruct:r,version:i,args:n,observer:{publisher:e,virtualNode:this}})},onbefore:function(){!this.virtual&&t.tag&&"undefined"!=typeof t.tag[this.tag]&&(this.virtual=!0)},onafter:function(){if(t.tag&&"undefined"!=typeof t.tag[this.tag])try{R.getPropertyByProject(t.tag[this.tag]).selector(this).execute()}catch(e){this.error("<"+this.tag+"/>",e)}}}),t.compiler=r.compiler,new T({name:"onrendered",projectStruct:r,version:i,args:n,launchCallback:e,callback:function(){return r.renderVersion=0,e?e():undefined}})}})},renderState:function(e,t,n,r,i){R.state("render",e,t,n[B],i,r,function(){e.renderEventState=0,new T({name:"onrenderstart",projectStruct:e,version:t,args:n})},function(){e.renderEventState=0,new T({name:"onrenderpause",projectStruct:e,version:t,args:n})},function(){e.renderEventState=0,new T({name:"onrenderstop",projectStruct:e,version:t,args:n})})},state:function(e,n,t,r,i,o,a,s,c){var u=e+"State",h=e+"Timer",d=e+"EventState";return t!==n[e+"Version"]?o?o():undefined:!(r&&!C.isCurrentProject(n.project))&&(t=n[u],e=n[d],1===t?(1===e&&a(),i()):2!==t?(1===e&&c(n),o?o():undefined):(1===e&&s(),n[h]&&(n[h].stop(),n[h]=undefined),void(n[h]=new l(function(){var e,t;return r&&!C.isCurrentProject(n.project)?(n[h]&&(n[h].stop(),n[h]=undefined),!1):(e=n[u],t=n[d],2===e?(1===t&&s(),!0):(n[h]&&(n[h].stop(),n[h]=undefined),1===e?(1===t&&a(),i()):(1===t&&c(),o?o():undefined)))},!0).interval(0).start())))},remove:function(e){var t,n,r=e.index,i=R.getStructByIndex(r);if(i){for(n in C.project===i.project&&(C.project=undefined),i.compiler&&i.compiler.unparse(),v.has(i.project)&&v.remove(i.project),i.projectProperty["abstract"]||((t=new Object)[be]=!1,t[E]=!1,e.event(t)),e.derived&&"object"==typeof e.derived&&(e.derived.each(function(e){e.data.$.base.remove(i.project)}),delete e.derived),e.base&&"object"==typeof e.base&&(e.base.each(function(e){e.data.$.derived.remove(i.project)}),delete e.base),"undefined"!=typeof R.projects[e.name]&&delete R.projects[e.name],delete R.structs[r],i.project)i.project.hasOwnProperty(n)&&delete i.project[n];for(n in i.projectProperty)i.projectProperty.hasOwnProperty(n)&&delete i.projectProperty[n]}}};function M(){if(!arguments.length)return"";M.prototype.template&&"object"==typeof M.prototype.template||(M.prototype.template=new Object);var e=arguments[0],t=M.prototype.template[e]||null;if(null===t)return"<<<<<框架语言编号["+e+"]异常>>>>>";if("string"==typeof t&&!u(t))for(var n=1;n<arguments.length;n++)t=t.replace(new RegExp("\\$\\{"+n+"\\}","g"),arguments[n]);return t}function Fe(e,t){this.type=e,this.arguments=t}function _e(){}function Ue(){for(var e in this.running=V.runningStatus,this.router={mode:V.routerConfig.mode,modeHistory:V.routerConfig.isModeHistory(),listener:Boolean(V.routerConfig.listener),pageEvent:Boolean(V.routerConfig.pageEvent)},this.history={pageMaximum:V.historyConfig.pageMaximum,stepMaximum:V.historyConfig.stepMaximum},this.data={length:Object.keys(R.projects).length},this.include=new Object,k.includes)this.include[e]={length:Object.keys(k.includes[e]).length}}function ze(e){this.onfinally="function"==typeof e.onfinally?e.onfinally:null,this.onresolve="function"==typeof e.onresolve?e.onresolve:null,this.onreject="function"==typeof e.onreject?e.onreject:null,this.src="undefined"!=typeof e.src?e.src:undefined;var t=null;null===(t="string"==typeof this.src||"object"==typeof this.src&&this.src.constructor==w?this.src:t)?this.include=null:this.include=k.create({src:t,"async":"undefined"!=typeof e["async"]&&Boolean(e["async"]),type:e.type||""})}M.prototype={constructor:M,concat:function(){for(var e=new Array,t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join(" \n> ")},merge:function(e){for(var t in e)n(e[t])&&(M.prototype.template[t]=e[t])},template:{10000001:"错误命令",10000002:"模板内容",10000003:"警告命令",10000004:"引用信息",10001e3:"缺少 “${1}” 类型的插件",20000001:"“${1}” 命令不能在同一个标签中同时存在或存在多个",20000002:"“${1}” 命令不能在同一个标签中存在多个",20000003:"“${1}” 命令不能为空",20000004:"“${1}” 模板语法错误",20000005:"“${1}” 命令不合法, 缺少属性名称",20000006:"“${1}” 命令不合法, 缺少类名称",20000007:"“${1}” 命令不合法, 缺少样式键名称",20000008:"“${1}” 命令缺少事件名称",20000009:"“${1}” 命令语法错误, “else if | else” 命令之前的同级节点必须存在 “if”, “else” 命令之前的同级节点必须存在 “else if | if” 命令",30000001:"渲染出错, “${1}” 是渲染数据的属性, 不能定义为遍历单元键的别名称",30000002:"渲染出错, “${1}” 是渲染数据的属性, 不能定义为遍历单元值的别名称",30000003:"渲染出错, “${1}” 是渲染数据的属性, 不能定义为遍历单元索引的别名称",30000004:"渲染出错, “${1}” 不是一个对象",30000005:"渲染出错, “${1}” 不是一个字符串",30000006:"渲染出错, 选择器是一个抽象节点树, 未找到可渲染有效节点",30000007:"渲染出错, “${1}” 循环标识重复, 自定义的循环标识必须是一个唯一值",30000008:"预编译声明 “${1}” 未定义",40000001:"“${2}” 数据工程初始化异常, “${1}” 数据工程与 “${2}” 数据工程之间存在互相继承关系, 以致数据工程准备存在继承不完整缺陷",40000002:"“${2}” 数据工程初始化未完成, “${1}” 数据工程与 “${2}” 数据工程之间互相挂载存在缺陷",40000003:"“${1}” 数据工程已经存在, 数据工程重复定义被阻止",40000004:"“${1}” 数据工程的筛选器 “${2}” 配置不合法, 创建渲染筛选节点失败",40000005:"数据工程 “${1}” 继承父级数据工程 “${2}” 失败",40000006:"数据工程 “${1}” 挂载数据工程 “${2}” 失败",40000007:'webpanda.data ({ name: "${1}", ... })',40000008:"数据工程 “${1}” 定义的事件 “${2}” 不可使用",40000009:"源数据工程 “${1}” 克隆目标数据工程 “${2}” 失败",40000010:"数据工程 “${1}” 不存在",40000011:"数据工程 “${1}” 不能自己继承自己",50000001:"“${1}” 页面不存在",50000002:"数据工程名称为 “${1}” 的页面不存在",50000003:"页面加载被终止, “${1}” 数据工程创建引入资源失效",50000004:"数据工程名称为 “${1}” 的页面, 数据工程文件 “${2}” 加载失败",50000005:"防止暴力刷新, 页面守护启动!......更多技术支持: ${1}",50000006:"webpanda.config 全局定义的事件 “${1}” 不可使用",50000007:"数据工程 “${1}” 是一个抽象数据，不能用来渲染页面"}},Fe.prototype={constructor:Fe},_e.prototype={constructor:_e},Ue.prototype={constructor:Ue};var V={error:function(e){e="undefined"==typeof(e=void 0===e?"":e).stack?e:e+"\n===============================================\n"+e.stack;console.error("Webpanda Error:\n\n┍---------------------------------------------┑\n\n"+e+"\n\n┕---------------------------------------------┙\n")},runningStatus:!(ze.prototype={constructor:ze,trigger:function(){k.trigger(this.include,this,V.getInstance())}}),queue:new G,pluginList:new Array,pluginType:{include:"include"},pluginRegister:function(e){if(!e)return!1;var t,n,r=null;if("function"==typeof e)r=e;else{if("object"!=typeof e||"function"!=typeof e.webpandaPluginMain)return!1;n=(t=e).webpandaPluginMain,(e=function(){return n.apply(t,arguments)}).targetName="plugin",e.targetFunction=n,e.targetThis=t,r=e}return V.pluginList.push(r),!0},pluginExecution:function(e){for(var t=0;t<V.pluginList.length;t++)(0,V.pluginList[t])(e)},include:function(e){var t=new Array;return k.struct(e,V.getInstance(),function(e){e=new ze(e);e.include&&t.push(e)}),V.includeReady(t,0),t},includeReady:function(e,t){var n,r;if("undefined"!=typeof e[t])return r=function(){n.trigger(),V.includeReady(e,t+1)},(n=e[t]).include.executeStatus?n.include.resultStatus?r():void n.include.wait.push(new Ee({resultArgument:!0,onfinally:r})):n.include["async"]?(n.include.execute(),r()):n.include.execute(r,r)},initialize:function(e){this.version=t,this.author=H,this.js="webpanda.js v"+t+" 是用于在 web 上构建项目, 基于 ECMAScript 5 特性的单页应用 (SPA) JavaScript 框架!",this.config=function(e){return V.config(e)},this.status=function(){return new Ue},this.language=function(){return M.prototype.merge.apply(M.prototype.merge,arguments),this},this.language.target=function(){return M.apply(M,arguments)},this.plugin=function(e){return V.pluginRegister(e)},this.plugin.type=function(){var e,t=new Object,n=new Object;for(e in V.pluginType)V.pluginType.hasOwnProperty(e)&&(n[e]={value:V.pluginType[e],writable:!1,enumerable:!0,configurable:!1});return Object.defineProperties(t,n),t}(),this.compiler=function(e){return new b(e)},this.compiler.isInstanceOf=function(e){return Boolean(e&&"object"==typeof e&&e instanceof b)},this.observer=function(e){return v.create(e),e},this.observer.enable=function(e){return v.enable(e)},this.observer.enableSubscribe=function(e){return v.enableSubscribeContext(e)},this.observer.enablePublish=function(e){return v.enablePublishContext(e)},this.observer.disable=function(e){return v.disable(e)},this.observer.disableSubscribe=function(e){return v.disableSubscribeContext(e)},this.observer.disablePublish=function(e){return v.disablePublishContext(e)},this.observer.enableRemove=function(e){return v.remove(e),e},this.observer.disableRemove=function(e){return v.removeDisable(e),e},this.observer.enableStatus=function(e){return v.has(e)},this.observer.disableStatus=function(e){return v.hasDisable(e)},this.url=function(e,t){return new w(e,t)},this.url.option=function(){var e,t=new Object,n=new Object;for(e in N.option)N.option.hasOwnProperty(e)&&(n[e]={value:N.option[e],writable:!1,enumerable:!0,configurable:!1});return Object.defineProperties(t,n),t}(),this.url.isInstanceOf=function(e){return Boolean(e&&"object"==typeof e&&e instanceof w)},this.queue=function(e){return V.queue.run(e),this},this.timer=function(e,t,n,r){return new l(e,t,n,r)},this.timer.isInstanceOf=function(e){return Boolean(e&&"object"==typeof e&&e instanceof l)},this.data=function(e){return R.builder(e)},this.data["this"]=null,this.data.isInstanceOf=function(e){return Boolean(e&&"object"==typeof e&&e instanceof Le&&R.status(e))},this.data.getAll=function(){return R.projects},this.data.get=function(e){return R.getProjectByName(e)},this.data.getByIndex=function(e){return R.getProjectByIndex(e)},this.data.getReadyState=function(e){return R.readyStateByName(e)},this.data.ready=function(e,t){return R.readyByName(e,t)},this.include=function(e){return new V.include(e)},this.include.getAll=function(){return k.includes},this.run=function(){return I.run(),V.runningStatus=!0,this},this.run.status=function(){return V.runningStatus},this.page=function(e){return C.run(e),this},this.page.runtime=function(){return C.runtime},this.page.firstStatus=function(){return C.firstStatus},this.page.data=function(){return C.project},this.page.url=function(){return C.url},this.history=O.instance,this.URLEncode=function(e){return o(e)},this.URLDecode=function(e){return d(e)},this.URLQueryEncode=function(e){return N.buildQuery(e)},this.URLQueryDecode=function(e){return N.parseQuery(e)},this.HTMLEncode=function(e){return _(e)},this.HTMLDecode=function(e){return U(e)},this.env=new Object,this.mount=e},getInstance:function(){return c.webpanda},includeConfig:new $e,historyConfig:new je,routerConfig:new Te,config:function(e){e&&"object"==typeof e&&(e.include&&V.includeConfig.config(e.include),e.router&&V.routerConfig.config(e.router),e.history)&&V.historyConfig.config(e.history)}},qe=new _e,De=Object.create(qe);V.initialize.call(De,qe),Object.preventExtensions(De),c.webpanda=De}(window,document,"a@apilipala.com","5.10.23");